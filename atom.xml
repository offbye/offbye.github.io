<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>offbye</title>
  <subtitle>关注移动架构，Android，HTML5，iOS技术前沿</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://offbye.com/"/>
  <updated>2016-08-29T04:35:13.000Z</updated>
  <id>http://offbye.com/</id>
  
  <author>
    <name>offbye</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Cordova支付宝插件的那些坑</title>
    <link href="http://offbye.com/2016/08/26/Cordova%E6%94%AF%E4%BB%98%E5%AE%9D%E6%8F%92%E4%BB%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E5%9D%91/"/>
    <id>http://offbye.com/2016/08/26/Cordova支付宝插件的那些坑/</id>
    <published>2016-08-26T07:53:14.000Z</published>
    <updated>2016-08-29T04:35:13.000Z</updated>
    
    <content type="html">&lt;p&gt;最近帮忙折腾Cordova App，因为是商城类App，需要接APP微信支付和支付宝支付，于是先到github上找相关的插件解决，微信支付很顺利的用插件解决了，支付宝插件就不那么顺利了，网上的几个插件要么过时了，要么实现不合理或不完整，最后还是自己改了个支付宝插件。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;首先我找了star最多的插件，&lt;a href=&quot;https://github.com/charleyw/cordova-plugin-alipay，&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/charleyw/cordova-plugin-alipay，&lt;/a&gt; 结果发现这个插件已经过时了，API和最新的&lt;a href=&quot;https://doc.open.alipay.com/doc2/detail.htm?treeId=54&amp;amp;articleId=104509&amp;amp;docType=1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;支付宝SDK&lt;/a&gt;对不上， 然后签名竟然是在客户端计算，导致安全问题和iOS需要增加很大的静态库，于是放弃这个了，充分说明了star多的项目不一定就能用。&lt;/p&gt;
&lt;p&gt;然后我找到了一个更新时间比较近的项目，&lt;a href=&quot;https://github.com/chenyuanchn/cordova-plugin-alipay，这个项目比较简单合理，服务器端负责生成payInfo字符串，客户端支付调用支付宝。问题是iOS上编译有错误，原因是有几个库没有加入到插件config.xml中，不熟悉iOS的人就郁闷了，我参考了[iOS接入支付宝](http://caoyudong.com/2016/01/03/iOS%E6%8E%A5%E5%85%A5%E6%94%AF%E4%BB%98%E5%AE%9D/)解决问题。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/chenyuanchn/cordova-plugin-alipay，这个项目比较简单合理，服务器端负责生成payInfo字符串，客户端支付调用支付宝。问题是iOS上编译有错误，原因是有几个库没有加入到插件config.xml中，不熟悉iOS的人就郁闷了，我参考了[iOS接入支付宝](http://caoyudong.com/2016/01/03/iOS%E6%8E%A5%E5%85%A5%E6%94%AF%E4%BB%98%E5%AE%9D/)解决问题。&lt;/a&gt;&lt;br&gt;这个库还有个问题是没有实现callback回调。&lt;/p&gt;
&lt;p&gt;然后我fork了这个插件，并完善了上面提到的几个问题，放在git上了。需要的可以拿去用。地址如下&lt;br&gt;&lt;a href=&quot;https://github.com/offbye/cordova-plugin-alipay&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/offbye/cordova-plugin-alipay&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最后强烈建议支付宝维护个官方的Cordova插件吧，毕竟这是涉及到支付安全的产品啊。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近帮忙折腾Cordova App，因为是商城类App，需要接APP微信支付和支付宝支付，于是先到github上找相关的插件解决，微信支付很顺利的用插件解决了，支付宝插件就不那么顺利了，网上的几个插件要么过时了，要么实现不合理或不完整，最后还是自己改了个支付宝插件。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Mac Terminal终端光标的快捷键操作</title>
    <link href="http://offbye.com/2016/08/18/Mac-Terminal%E7%BB%88%E7%AB%AF%E5%85%89%E6%A0%87%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%93%8D%E4%BD%9C/"/>
    <id>http://offbye.com/2016/08/18/Mac-Terminal终端光标的快捷键操作/</id>
    <published>2016-08-18T07:45:11.000Z</published>
    <updated>2016-08-18T08:01:28.000Z</updated>
    
    <content type="html">&lt;p&gt;Mac Terminal终端和linux上终端光标的快捷键操作是一样的，都是来自Emacs这个神级的编辑器，由于我以前vim用的多，没怎么用过Emacs，所以就不习惯了。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;常用的快捷键：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + d        删除一个字符，相当于通常的Delete键（命令行若无所有字符，则相当于exit；处理多行标准输入时也表示eof）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + h        退格删除一个字符，相当于通常的Backspace键&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + u        删除光标之前到行首的字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + k        删除光标之前到行尾的字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + c        取消当前行输入的命令，相当于Ctrl + Break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + a        光标移动到行首（Ahead of line），相当于通常的Home键&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + e        光标移动到行尾（End of line）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + f        光标向前(Forward)移动一个字符位置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + b        光标往回(Backward)移动一个字符位置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + l        清屏，相当于执行clear命令&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + p        调出命令历史中的前一条（Previous）命令，相当于通常的上箭头&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + n        调出命令历史中的下一条（Next）命令，相当于通常的上箭头&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + r        显示：号提示，根据用户输入查找相关历史命令（reverse-i-search）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;次常用快捷键：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt + f         光标向前（Forward）移动到下一个单词&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt + b         光标往回（Backward）移动到前一个单词&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + w        删除从光标位置前到当前所处单词（Word）的开头&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alt + d         删除从光标位置到当前所处单词的末尾&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ctrl + y        粘贴最后一次被删除的单词&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以上就是快捷键了，在这里我只想揭露一些事情，这些快捷键都是emacs的快捷键！熟悉终端的同学应该知道，终端里可以设置快捷键的类型是vim还是emacs。当然了大多数的终端都用的emacs，因为啥自己想去吧。我估计原因是这些东西都是早期的C/C++大神写的，一脉相承下来的！&lt;br&gt;mac os x虽然是图形界面，但是chrome，xcode啥的也支持这些快捷键！&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Mac Terminal终端和linux上终端光标的快捷键操作是一样的，都是来自Emacs这个神级的编辑器，由于我以前vim用的多，没怎么用过Emacs，所以就不习惯了。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Tower中国用户适配版本--cTower手机地面站</title>
    <link href="http://offbye.com/2016/08/04/Tower%E4%B8%AD%E5%9B%BD%E7%94%A8%E6%88%B7%E9%80%82%E9%85%8D%E7%89%88%E6%9C%AC-cTower%E6%89%8B%E6%9C%BA%E5%9C%B0%E9%9D%A2%E7%AB%99/"/>
    <id>http://offbye.com/2016/08/04/Tower中国用户适配版本-cTower手机地面站/</id>
    <published>2016-08-04T01:22:32.000Z</published>
    <updated>2016-08-04T01:23:25.000Z</updated>
    
    <content type="html">&lt;p&gt;最近折腾无人机，发现官方的Tower手机地面站在很多国产手机上不可用，没有谷歌gms服务啊，于是花了几天自己改了一个版本，欢迎广大模友试用。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tower is a Ground Control Station (GCS) Android app built atop &lt;a href=&quot;https://github.com/dronekit/dronekit-android&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;3DR Services&lt;/a&gt;, for UAVs&lt;br&gt;running Ardupilot software.&lt;/p&gt;
&lt;h1 id=&quot;Tower中国用户适配版本–cTower手机地面站-by-offbye&quot;&gt;&lt;a href=&quot;#Tower中国用户适配版本–cTower手机地面站-by-offbye&quot; class=&quot;headerlink&quot; title=&quot;Tower中国用户适配版本–cTower手机地面站 by offbye&quot;&gt;&lt;/a&gt;Tower中国用户适配版本–cTower手机地面站 by offbye&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;3DR官方Tower手机地面站在国内不适用，国内多数手机没有谷歌服务和谷歌市场，因此没法安装3DR services服务，谷歌地图在国内由于众所周知的原因，也不好用。&lt;/p&gt;
&lt;p&gt;因此我为了自己玩的开心，Fork了Tower项目并逐步改的让国内主流安卓手机能正常使用，希望能够造福魔友，也欢迎有能力的朋友一起开发完善，不欢迎商业闭源使用。&lt;/p&gt;
&lt;p&gt;cTower在尽量保留Tower原版最新功能不变的基础上，针对国内手机用户进行适配和增强，版本号和Tower保持同步。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;3-2-2-更新说明&quot;&gt;&lt;a href=&quot;#3-2-2-更新说明&quot; class=&quot;headerlink&quot; title=&quot;3.2.2 更新说明&quot;&gt;&lt;/a&gt;3.2.2 更新说明&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;cTower地面站，实现支持去掉谷歌gms服务的国产手机&lt;/li&gt;
&lt;li&gt;去掉3DR服务检查 by [i]offbye[/i]&lt;/li&gt;
&lt;li&gt;增加高德地图支持，并设为默认地图，可以设置切换谷歌地图&lt;/li&gt;
&lt;li&gt;修改了应用ID，避免和原版Tower冲突&lt;/li&gt;
&lt;li&gt;修改gradle配置，适配高德地图，解决GFW导致一些repo下载慢无法编译的问题&lt;/li&gt;
&lt;li&gt;&lt;p&gt;增强简体中文翻译&lt;/p&gt;
&lt;h3 id=&quot;下载cTower3-2-2版本&quot;&gt;&lt;a href=&quot;#下载cTower3-2-2版本&quot; class=&quot;headerlink&quot; title=&quot;下载cTower3.2.2版本&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://o79096vir.bkt.clouddn.com/ctower/cTower-v3.2.2-release.apk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载cTower3.2.2版本&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/ctower/S60803-20125595.jpg&quot; alt=&quot;ctower&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;下载Tower官方版本 &lt;a href=&quot;https://play.google.com/store/apps/details?id=org.droidplanner.android&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;img src=&quot;https://developer.android.com/images/brand/en_app_rgb_wo_45.png&quot; alt=&quot;Google Play Store&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Usage-Guide&quot;&gt;&lt;a href=&quot;#Usage-Guide&quot; class=&quot;headerlink&quot; title=&quot;Usage Guide&quot;&gt;&lt;/a&gt;Usage Guide&lt;/h3&gt;&lt;p&gt;The &lt;a href=&quot;https://github.com/DroidPlanner/droidplanner/wiki&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wiki&lt;/a&gt; has some basic documentation (Help us by making it better!)&lt;/p&gt;
&lt;p&gt;For help, visit the &lt;a href=&quot;http://discuss.ardupilot.org/c/ground-control-software/tower&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Tower Discuss forum&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近折腾无人机，发现官方的Tower手机地面站在很多国产手机上不可用，没有谷歌gms服务啊，于是花了几天自己改了一个版本，欢迎广大模友试用。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>安卓旧项目使用Small框架插件化改造踩坑记</title>
    <link href="http://offbye.com/2016/07/22/%E5%AE%89%E5%8D%93%E6%97%A7%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8Small%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E6%8F%92%E4%BB%B6%E5%8C%96%E6%94%B9%E9%80%A0%E7%9A%84%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>http://offbye.com/2016/07/22/安卓旧项目使用Small框架进行插件化改造的问题汇总/</id>
    <published>2016-07-22T13:28:18.000Z</published>
    <updated>2016-08-03T04:08:05.000Z</updated>
    
    <content type="html">&lt;p&gt;我们团队把一个10万行安卓代码的旧项目（电商系统管理台App），使用Small框架做了插件化改造。把项目分成了10多个插件模块，解除了业务模块之间的代码耦合，为业务功能的快速迭代和多团队并行开发做好基础架构。迁移期间遇到了一些坑，但最后在大家的努力下基本得到了解决，也感谢Small的作者光亮对我们提出的issue的快速响应。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Small的应用场景&quot;&gt;&lt;a href=&quot;#Small的应用场景&quot; class=&quot;headerlink&quot; title=&quot;Small的应用场景&quot;&gt;&lt;/a&gt;Small的应用场景&lt;/h2&gt;&lt;p&gt;开发时：让你完全透明的像开发普通工程一样完成插件开发&lt;br&gt;编译时：自动化的帮助你分离各个公共库、业务模块插件（插件仅保留自身的代码跟资源，达到最小化）&lt;br&gt;运行时：运用最少量的Hook无缝的将各个插件并入宿主，让代码跟资源完全融合，自由调用&lt;br&gt;所以撇开开发者不用关注的(2)来说，Small的目的就是要做到保证开发者「畅快开发」的体验，以及App使用者「顺畅使用」的体验。&lt;/p&gt;
&lt;p&gt;插件化方案有很多，很难有统一的形态，各有各的适用场景。如果你需要分发你的插件给别人使用，Small无法满足；如果你想利用插件化拆分、重组自己的应用，我认为Small在这方面已经走在了前面，并且将不断完善，做到极致。&lt;/p&gt;
&lt;h2 id=&quot;插件化的工程（开发）结构&quot;&gt;&lt;a href=&quot;#插件化的工程（开发）结构&quot; class=&quot;headerlink&quot; title=&quot;插件化的工程（开发）结构&quot;&gt;&lt;/a&gt;插件化的工程（开发）结构&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/wequick/Small/issues/118&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于工程（开发）结构的讨论&lt;/a&gt;&lt;br&gt;1.依赖管理：Small使用同一个ClassLoader加载不同的插件，因此不同插件中的依赖在运行时对其他插件和宿主都是可见的，所以依赖的管理一定要收敛，统一管理，避免各自引入。&lt;br&gt;2.插件之间的通信：插件的开发一般都是多team并行的，插件之间应避免直接调用来减少耦合&lt;br&gt;3.资源的使用：由于small的特性，runtime各插件的资源也是可以相互访问的，但在开发上需要组织和统一管理好，包括命名和安全的使用资源。&lt;/p&gt;
&lt;h2 id=&quot;老项目集成Small插件的官方建议&quot;&gt;&lt;a href=&quot;#老项目集成Small插件的官方建议&quot; class=&quot;headerlink&quot; title=&quot;老项目集成Small插件的官方建议&quot;&gt;&lt;/a&gt;老项目集成Small插件的官方建议&lt;/h2&gt;&lt;h3 id=&quot;基本原则&quot;&gt;&lt;a href=&quot;#基本原则&quot; class=&quot;headerlink&quot; title=&quot;基本原则&quot;&gt;&lt;/a&gt;基本原则&lt;/h3&gt;&lt;p&gt;宿主中不要放业务逻辑。只做加载插件以及调起主插件的操作。&lt;/p&gt;
&lt;h3 id=&quot;重构步骤&quot;&gt;&lt;a href=&quot;#重构步骤&quot; class=&quot;headerlink&quot; title=&quot;重构步骤&quot;&gt;&lt;/a&gt;重构步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;拆lib.&lt;em&gt; - 公共模块插件&lt;br&gt;把各个第三方库拆出来做成一个个`lib.&lt;/em&gt;`插件模块，包括统计、地图、网络、图片等库。&lt;br&gt;把老项目积累的业务公共代码(utils)分离出来封装成一个lib.utils插件&lt;br&gt;把基础的样式、主题分离出来封装成一个lib.style插件&lt;/li&gt;
&lt;li&gt;拆app.&lt;em&gt; - 业务模块插件&lt;br&gt;把业务模块拆成`app.&lt;/em&gt;&lt;code&gt;模块，他们可以依赖&lt;/code&gt;lib.&lt;em&gt;&lt;code&gt;模块，显示调用&lt;/code&gt;lib.&lt;/em&gt;`中的各个API&lt;br&gt;相对独立的业务模块先拆，比如“详情页”、“关于我们”，如果剩下的业务不好拆，先放一个插件里&lt;br&gt;如果都不好拆，先把全部业务做成一个app.main主插件&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;插件之间的通信&quot;&gt;&lt;a href=&quot;#插件之间的通信&quot; class=&quot;headerlink&quot; title=&quot;插件之间的通信&quot;&gt;&lt;/a&gt;插件之间的通信&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/wequick/Small/issues/120&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;插件之间的通信/互调&lt;/a&gt;&lt;br&gt;目前的插件之间的通信仅限于Small.openUri()，用来调起其它插件的页面。&lt;/p&gt;
&lt;p&gt;但有些时候，我们还是需要操作一下其它插件。 比如说在跳转到另一个插件的页面之前，需要查询一下对方插件的一个状态。&lt;br&gt;我觉得应该借助v4包的LocalBroadcastManager来实现&lt;/p&gt;
&lt;h2 id=&quot;老项目集成Small插件化遇到的坑&quot;&gt;&lt;a href=&quot;#老项目集成Small插件化遇到的坑&quot; class=&quot;headerlink&quot; title=&quot;老项目集成Small插件化遇到的坑&quot;&gt;&lt;/a&gt;老项目集成Small插件化遇到的坑&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;插件中通过startActivityForResult获取不到数据问题。如果启动的Activity是SingleTask启动模式，有这个问题。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;插件lib2依赖插件lib1，导致同时依赖lib1和lib2的插件app1编译时出现找不到类的情况。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一个lib依赖另一个lib，buildLib时出现Duplicate package错误&lt;br&gt;一个lib依赖另一个lib，buildLib时出现下面的错误，目前还没有找到解决吧，clean工程和cleanLib都做了，但还不行，只好把依赖去掉了才行。原因未知&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果插件用到了百度地图等，需要把相关的功能放在一个插件下面，注意那些很大的.so是放在插件里面的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Small插件中是支持aar引用的，实际使用过了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Small的插件限制了包名，因此已有代码复制过来会有改变。特别要注意layout文件中自定义控件包名的改动，能够通过编译但运行时会找不到类。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;通过assembleRelease单独编译一个插件出现下面的错误，但有的电脑能正常单独编译插件，原因未知，已经提issue。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;下午2:30:54: Executing external task &amp;apos;assembleRelease&amp;apos;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Configuration on demand is an incubating feature.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Incremental java compilation is an incubating feature.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FAILURE: Build failed with an exception.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* What went wrong:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A problem occurred configuring project &amp;apos;:app.me&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; Could not find property &amp;apos;android&amp;apos; on project &amp;apos;:app&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* Try:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUILD FAILED&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;第三方SDK的meta，Service等需要在宿主App的manifest中声明，例如百度地图SDK的定位Service。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;lib.utils删除资源后出现编译错误，解决办法是删除public.txt，重新编译lib和bundle&lt;/li&gt;
&lt;li&gt;老代码一些业务上耦合比较紧的页面不容易拆开，可以作为一个模块存在，我们最后拆成了6个大模块。&lt;/li&gt;
&lt;li&gt;&lt;p&gt;目前1.0版本不支持gradle并行编译，在gradle.properties中打开&lt;code&gt;org.gradle.parallel=true&lt;/code&gt; 编译会报错&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;  gradle  buildLib -q&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Small] [Small] building library 1 of 2 - app (0x7f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Small] [Small] building library 1 of 2 - app (0x7f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;building library 2 of 2 - lib.utils (0x73)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FAILURE: Build failed with an exception.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* What went wrong:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Execution failed for task &amp;apos;:lib.utils:preBuild&amp;apos;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ./build-small/intermediates/small-pre-link/aar/app-D.txt (No such file or directory)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;参考&lt;a href=&quot;http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gradle文档&lt;/a&gt;&lt;br&gt;这个不是Bug，有依赖的工程肯定是不能并行编译的&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;后面遇到问题会持续更新&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;参考文章&quot;&gt;&lt;a href=&quot;#参考文章&quot; class=&quot;headerlink&quot; title=&quot;参考文章&quot;&gt;&lt;/a&gt;参考文章&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/wequick/Small/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wequick/Small/issues&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;我们团队把一个10万行安卓代码的旧项目（电商系统管理台App），使用Small框架做了插件化改造。把项目分成了10多个插件模块，解除了业务模块之间的代码耦合，为业务功能的快速迭代和多团队并行开发做好基础架构。迁移期间遇到了一些坑，但最后在大家的努力下基本得到了解决，也感谢Small的作者光亮对我们提出的issue的快速响应。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://offbye.com/tags/Android/"/>
    
      <category term="Small框架" scheme="http://offbye.com/tags/Small%E6%A1%86%E6%9E%B6/"/>
    
      <category term="插件化" scheme="http://offbye.com/tags/%E6%8F%92%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>买无人机之前你需要知道的几件事</title>
    <link href="http://offbye.com/2016/07/13/%E5%85%A5%E6%89%8B%E6%97%A0%E4%BA%BA%E6%9C%BA%E4%B9%8B%E5%89%8D%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E5%87%A0%E4%BB%B6%E4%BA%8B/"/>
    <id>http://offbye.com/2016/07/13/入手无人机之前你需要知道的几件事/</id>
    <published>2016-07-13T04:17:28.000Z</published>
    <updated>2016-08-26T11:27:48.000Z</updated>
    
    <content type="html">&lt;p&gt;随着近几年航拍机行业的火热，大疆等知名无人机厂商开始变得家喻户晓。近期小米无人机的上市，让越来越多的人想拥有自己的无人机。&lt;br&gt;航拍高大上，炸机很危险。在具备必要的知识和能力前，请不要把无人机作为炫耀的玩具。这几年小白玩大疆精灵在闹市区飞，在机场附近飞，炸机导致事故或影响公共安全的事情还少吗？&lt;br&gt;本文就谈下新手入手航拍机前需要知道的一些事情。作为一个在5iMX玩了很多年的资深模友，我首先以5iMX的56字航模箴言开头吧&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;航模爱好趣无穷，正确操纵是关键。莫把器材当玩具，忽视安全悔一生。&lt;br&gt;    新手好问勤练习，远离人群勿炫耀。天下模友一家人，共建美好新生活。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;首先说下无人机这个概念吧，无人机应该是指拥有自主飞行能力的飞行器，即可以不需要人干预的情况下自动飞行，大疆和零度无人机多数型号是可以设置航点自主飞行的。现在消费市场上所说的无人机很多都只能算是航拍机，本文的讨论对象也主要是航拍机。&lt;/p&gt;
&lt;p&gt;玩无人机安全问题需要时刻放在第一位，不在闹市区和人群密集的地方，不在机场附近等禁飞区飞，不在高大建筑物附近飞，不在发生重大事件或灾害的现场飞，除非得到了相关部门的明确授权，否则可能会触发相关法律。个人精神状态不好的时候不能飞，无人机有故障隐患没排除时不能飞。&lt;/p&gt;
&lt;p&gt;在了解了这些后你还想入手无人机的话请继续往下看。&lt;/p&gt;
&lt;h2 id=&quot;你为什么想买无人机？&quot;&gt;&lt;a href=&quot;#你为什么想买无人机？&quot; class=&quot;headerlink&quot; title=&quot;你为什么想买无人机？&quot;&gt;&lt;/a&gt;你为什么想买无人机？&lt;/h2&gt;&lt;p&gt;每个人在入手无人机前都有自己的需求和动机，有人是为了在朋友圈发图和炫耀，有人是为了新奇，有人是为了学习和了解相关的技术。这些都是常见也是正常的需求，还有人是为了用无人机送给戒指什么的，这种需求还是交给专业团队做吧，就不要自己买无人机了，太危险。&lt;br&gt;需要知道的是，自己组装无人机并不比买商业无人机便宜，一般用户就不要为了省钱自己组装无人机了。但组装无人机是一件很有乐趣和挑战的事情，需要投入大量的时间和金钱。&lt;/p&gt;
&lt;h2 id=&quot;无人机相关的法规&quot;&gt;&lt;a href=&quot;#无人机相关的法规&quot; class=&quot;headerlink&quot; title=&quot;无人机相关的法规&quot;&gt;&lt;/a&gt;无人机相关的法规&lt;/h2&gt;&lt;p&gt;目前无人机方面的规定是怎样的情况呢？原则上，超过一定重量，在视距外飞行的无人机每次飞行前都需要申报飞行计划。尽管不少人有驾驶执照，申请计划的不便还是让多数无人机处于“黑飞”之中。中国航空器拥有者及驾驶员协会（以下简称AOPA）牵头，多家企业联合开发的针对轻小无人机的监管系统Ucloud已经上线。中国民用航空局飞行标准司已经正式批准轻小型无人机监管系统“优云（U-Cloud）”实施运行。批准文件有效期两年：自颁发日期2016年3月4日起至2018年3月3日。&lt;br&gt;但这个规定现在很多地方并没有认真执行过，倒是AOPA在通过发无人机执照赚钱，航模圈里业余玩的航模爱好者很少有人会去办这个执照，但商业无人机领域好像挺认这个证书的，会花1-2万考个证书。具体参考下知乎&lt;a href=&quot;https://www.zhihu.com/question/33263185&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何评价AOPA及ASFC颁发的相关无人机证件？&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;玩无人机需要的技术技能&quot;&gt;&lt;a href=&quot;#玩无人机需要的技术技能&quot; class=&quot;headerlink&quot; title=&quot;玩无人机需要的技术技能&quot;&gt;&lt;/a&gt;玩无人机需要的技术技能&lt;/h2&gt;&lt;p&gt;玩商业无人机对于技能的要求比较低，只需要熟悉遥控器的操作和功能，较好的心理素质，了解无人机飞行的基本原理，熟悉手机和电脑操作。无人机经常会升级更新固件的，当然你也可以选择不升级。&lt;br&gt;如果是你打算自己组装无人机，需要知道的东西就很多了。需要有机械，电子，空气动力学，计算机等方面的知识，还需要有很强的动手能力和各种工具，熟悉飞控，电机，电调，动力锂电池，接收机，遥控器，图传，各种传感器等部件，还要熟悉APM，Pixhawk，CC3D等飞控和相关地面站软件，就不展开说了，总之门槛还是比较高的。&lt;/p&gt;
&lt;h2 id=&quot;飞行场地问题&quot;&gt;&lt;a href=&quot;#飞行场地问题&quot; class=&quot;headerlink&quot; title=&quot;飞行场地问题&quot;&gt;&lt;/a&gt;飞行场地问题&lt;/h2&gt;&lt;p&gt;无人机特别是固定翼飞机对于飞行场地要求还是比较高的，需要较大面积的空旷场地，并且不能在机场等设施附近，我一般是在湖边的大草坪飞，并且不在周末人比较多的时候飞，一般早上人很少时晚会比较方便。大疆等无人机都有禁飞区的设定，GPS定位到在禁飞区内是无法起飞的，北京四环以内好像都是禁飞区。&lt;br&gt;如果你生活在城市中心，附近没有合适的场地，入手无人机就需要考虑了，使用的频率会非常低。&lt;/p&gt;
&lt;p&gt;最后祝大家飞的开心！&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;随着近几年航拍机行业的火热，大疆等知名无人机厂商开始变得家喻户晓。近期小米无人机的上市，让越来越多的人想拥有自己的无人机。&lt;br&gt;航拍高大上，炸机很危险。在具备必要的知识和能力前，请不要把无人机作为炫耀的玩具。这几年小白玩大疆精灵在闹市区飞，在机场附近飞，炸机导致事故或影响公共安全的事情还少吗？&lt;br&gt;本文就谈下新手入手航拍机前需要知道的一些事情。作为一个在5iMX玩了很多年的资深模友，我首先以5iMX的56字航模箴言开头吧&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;航模爱好趣无穷，正确操纵是关键。莫把器材当玩具，忽视安全悔一生。&lt;br&gt;    新手好问勤练习，远离人群勿炫耀。天下模友一家人，共建美好新生活。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android OkHttp3使用http2问题记录</title>
    <link href="http://offbye.com/2016/07/09/Android-OkHttp3%E4%BD%BF%E7%94%A8http2%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    <id>http://offbye.com/2016/07/09/Android-OkHttp3使用http2问题记录/</id>
    <published>2016-07-09T01:52:52.000Z</published>
    <updated>2016-07-18T02:01:24.000Z</updated>
    
    <content type="html">&lt;p&gt;Android Okhttp3使用http2.0协议的接口时，发现一个问题，打印错误Log &lt;code&gt;E/NativeCrypto: ssl=0xd25d4000 cert_verify_callback x509_store_ctx&lt;/code&gt;,Google上没有查到相关的信息，毕竟现在http2用的还很少。经查看Android源码，排查发现这只是个LOG，不是错误，可以放心的用http2了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;测试http2发现android打印了下面的LOG&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.182 13670-13697/com.qianmi.shine I/System.out: [CDS]connect[shineapi2.qianmi.com/120.55.247.77:443] tm:20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.187 13670-13697/com.qianmi.shine E/Posix: [Posix_connect Debug]Process com.qianmi.shine :443&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.251 13670-13697/com.qianmi.shine D/libc-netbsd: [getaddrinfo]: hostname=shineapi2.qianmi.com; servname=(null); cache_mode=(null), netid=0; mark=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.252 13670-13697/com.qianmi.shine D/libc-netbsd: [getaddrinfo]: ai_addrlen=0; ai_canonname=(null); ai_flags=4; ai_family=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.300 13670-13697/com.qianmi.shine E/NativeCrypto: ssl=0xd25d4000 cert_verify_callback x509_store_ctx=0xdec78080 arg=0x0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.301 13670-13697/com.qianmi.shine E/NativeCrypto: ssl=0xd25d4000 cert_verify_callback calling verifyCertificateChain authMethod=ECDHE_RSA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;07-08 14:33:57.431 13670-13697/com.qianmi.shine I/System.out: gba_cipher_suite:TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;到github上找下相关的Android源码，&lt;br&gt;&lt;a href=&quot;https://github.com/ACSOP/android_libcore/blob/88e2ca00cc0c161d9aa3e512b8ae58b3091dbf87/luni/src/main/native/org_apache_harmony_xnet_provider_jsse_NativeCrypto.cpp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/ACSOP/android_libcore/blob/88e2ca00cc0c161d9aa3e512b8ae58b3091dbf87/luni/src/main/native/org_apache_harmony_xnet_provider_jsse_NativeCrypto.cpp&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Verify the X509 certificate via SSL_CTX_set_cert_verify_callback&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;static int cert_verify_callback(X509_STORE_CTX* x509_store_ctx, void* arg __attribute__ ((unused)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /* Get the correct index to the SSLobject stored into X509_STORE_CTX. */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SSL* ssl = reinterpret_cast&amp;lt;SSL*&amp;gt;(X509_STORE_CTX_get_ex_data(x509_store_ctx,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SSL_get_ex_data_X509_STORE_CTX_idx()));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JNI_TRACE(&quot;ssl=%p cert_verify_callback x509_store_ctx=%p arg=%p&quot;, ssl, x509_store_ctx, arg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AppData* appData = toAppData(ssl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JNIEnv* env = appData-&amp;gt;env;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (env == NULL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOGE(&quot;AppData-&amp;gt;env missing in cert_verify_callback&quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        JNI_TRACE(&quot;ssl=%p cert_verify_callback =&amp;gt; 0&quot;, ssl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jobject sslHandshakeCallbacks = appData-&amp;gt;sslHandshakeCallbacks;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jclass cls = env-&amp;gt;GetObjectClass(sslHandshakeCallbacks);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jmethodID methodID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        = env-&amp;gt;GetMethodID(cls, &quot;verifyCertificateChain&quot;, &quot;([[BLjava/lang/String;)V&quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jobjectArray objectArray = getCertificateBytes(env, x509_store_ctx-&amp;gt;untrusted);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* authMethod = SSL_authentication_method(ssl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JNI_TRACE(&quot;ssl=%p cert_verify_callback calling verifyCertificateChain authMethod=%s&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              ssl, authMethod);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jstring authMethodString = env-&amp;gt;NewStringUTF(authMethod);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    env-&amp;gt;CallVoidMethod(sslHandshakeCallbacks, methodID, objectArray, authMethodString);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int result = (env-&amp;gt;ExceptionCheck()) ? 0 : 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JNI_TRACE(&quot;ssl=%p cert_verify_callback =&amp;gt; %d&quot;, ssl, result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;JNI_TRACE其实就是个封装了LOG的宏，定义如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; WITH_JNI_TRACE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; JNI_TRACE(...) \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ((void)LOG(LOG_INFO, LOG_TAG &lt;span class=&quot;string&quot;&gt;&quot;-jni&quot;&lt;/span&gt;, __VA_ARGS__));     \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ((void)printf(&quot;I/&quot; LOG_TAG &quot;-jni:&quot;));         \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ((void)printf(__VA_ARGS__));          \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ((void)printf(&quot;\n&quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; JNI_TRACE(...) ((void)0)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是最后还是有一点疑惑，源码打印的LOG是info级别的，但手机上logcat打印出的error log，这也是我为什么会注意到的原因，目前只能认为是手机和源码的代码不同了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Android Okhttp3使用http2.0协议的接口时，发现一个问题，打印错误Log &lt;code&gt;E/NativeCrypto: ssl=0xd25d4000 cert_verify_callback x509_store_ctx&lt;/code&gt;,Google上没有查到相关的信息，毕竟现在http2用的还很少。经查看Android源码，排查发现这只是个LOG，不是错误，可以放心的用http2了。&lt;/p&gt;
    
    </summary>
    
    
      <category term="http2" scheme="http://offbye.com/tags/http2/"/>
    
      <category term="Android" scheme="http://offbye.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android Volley整合升级OkHttp3.3问题</title>
    <link href="http://offbye.com/2016/07/07/Android-Volley%E6%95%B4%E5%90%88%E5%8D%87%E7%BA%A7OkHttp3-3%E9%97%AE%E9%A2%98/"/>
    <id>http://offbye.com/2016/07/07/Android-Volley整合升级OkHttp3-3问题/</id>
    <published>2016-07-07T04:38:57.000Z</published>
    <updated>2016-07-08T11:15:55.000Z</updated>
    
    <content type="html">&lt;p&gt;我们以前的Android项目网络框架是基于Volley和OKHttp2。现在由于Aliyun SDK升级和整合React Native模块的原因，它们现在都是用了OkHttp3，因此需要统一升级到最新稳定版本OkHttp3.3。&lt;br&gt;参考了网上的一些资料，主要是有下面几个问题:首先是’org.apache.http’在Android6.0版本已经去掉了，因此需要用’org.apache.http.legacy’代替下。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OkHttp3Stack是参考了下面的Gist代码实现的，评论里面说不支持https。但是我实际测试过是支持https和http2的。&lt;br&gt;&lt;a href=&quot;https://gist.github.com/alashow/c96c09320899e4caa06b&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://gist.github.com/alashow/c96c09320899e4caa06b&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在app/gradle.settings的android块增加下面代码&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;useLibrary &amp;apos;org.apache.http.legacy&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另外一种方法是不再使用org.apache.http相关的类，参考&lt;a href=&quot;http://blog.csdn.net/qq_28656671/article/details/50608239&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/qq_28656671/article/details/50608239&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最后提醒一下，Volley框架现在已经不再升级了，后面的新项目不建议使用了，推荐使用基于Retrofit和OkHttp3的请求框架，老项目升级成本有点高，就不折腾了。&lt;/p&gt;
&lt;h2 id=&quot;参考文章&quot;&gt;&lt;a href=&quot;#参考文章&quot; class=&quot;headerlink&quot; title=&quot;参考文章&quot;&gt;&lt;/a&gt;参考文章&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/b022eed6b427&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/p/b022eed6b427&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/qq_28656671/article/details/50608239&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/qq_28656671/article/details/50608239&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/android_ls/article/details/50493581&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/android_ls/article/details/50493581&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/square/okhttp/blob/master/CHANGELOG.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/square/okhttp/blob/master/CHANGELOG.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gist.github.com/alashow/c96c09320899e4caa06b&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://gist.github.com/alashow/c96c09320899e4caa06b&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cnblogs.com/richiewang/p/5140040.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/richiewang/p/5140040.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mcxiaoke/android-volley&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mcxiaoke/android-volley&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;我们以前的Android项目网络框架是基于Volley和OKHttp2。现在由于Aliyun SDK升级和整合React Native模块的原因，它们现在都是用了OkHttp3，因此需要统一升级到最新稳定版本OkHttp3.3。&lt;br&gt;参考了网上的一些资料，主要是有下面几个问题:首先是’org.apache.http’在Android6.0版本已经去掉了，因此需要用’org.apache.http.legacy’代替下。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JWT安全验证常见疑问解答</title>
    <link href="http://offbye.com/2016/07/04/JWT%E5%AE%89%E5%85%A8%E9%AA%8C%E8%AF%81%E5%B8%B8%E8%A7%81%E7%96%91%E9%97%AE%E8%A7%A3%E7%AD%94/"/>
    <id>http://offbye.com/2016/07/04/JWT安全验证常见疑问解答/</id>
    <published>2016-07-04T05:49:14.000Z</published>
    <updated>2016-07-05T04:21:37.000Z</updated>
    
    <content type="html">&lt;p&gt;最近做基于&lt;a href=&quot;http://samnewman.io/patterns/architectural/bff/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BFF架构&lt;/a&gt;的分布式移动端API接口的系统设计。工作过程中发现有些工程师对JWT安全验证的认识存在一些偏差，重复讲解实在太麻烦了，在这里把关于JWT常见的一些疑问统一回答下吧。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;什么是JWT？&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://tools.ietf.org/html/rfc7519&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JSON Web Token (JWT)&lt;/a&gt;是一种基于 token 的认证方案。&lt;br&gt;JSON Web Tokens are an open, industry standard &lt;a href=&quot;https://tools.ietf.org/html/rfc7519&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFC 7519&lt;/a&gt; method for representing claims securely between two parties.&lt;br&gt;简单的说，JWT就是一种Token的编码算法，服务器端负责根据一个密码和算法生成Token，然后发给客户端，客户端只负责后面每次请求都在HTTP header里面带上这个Token，服务器负责验证这个Token是不是合法的，有没有过期等，并可以解析出subject和claim里面的数据。&lt;/p&gt;
&lt;p&gt;注意JWT里面的数据是BASE64编码的，没有加密，因此不要放如敏感数据。&lt;/p&gt;
&lt;p&gt;可以通过&lt;a href=&quot;https://jwt.io/这个网站对JWT&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://jwt.io/这个网站对JWT&lt;/a&gt; Token进行解析。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;一个JWT token 看起来是这样的:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjEzODY4OTkxMzEsImlzcyI6ImppcmE6MTU0ODk1OTUiLCJxc2giOiI4MDYzZmY0Y2ExZTQxZGY3YmM5MGM4YWI2ZDBmNjIwN2Q0OTFjZjZkYWQ3YzY2ZWE3OTdiNDYxNGI3MTkyMmU5IiwiaWF0IjoxMzg2ODk4OTUxfQ.uKqU9dTB6gKwG6jQCuXYAiMNdfNRw98Hw_IWuA5MaMo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以简化为下面这样的结构:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;base64url_encode(Header) + &amp;apos;.&amp;apos; + base64url_encode(Claims) + &amp;apos;.&amp;apos; + base64url_encode(Signature)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;为什么用JWT？&lt;/p&gt;
&lt;p&gt;JWT只通过算法实现对Token合法性的验证，不依赖数据库，Memcached的等存储系统，因此可以做到跨服务器验证，只要密钥和算法相同，不同服务器程序生成的Token可以互相验证。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;JWT Token需要持久化在Memcached中吗？&lt;br&gt;不应该这样做，这样就背离了JWT通过算法验证的初心。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在退出登录时怎样实现JWT Token失效呢？&lt;br&gt;退出登录， 只要客户端端把Token丢弃就可以了，服务器端不需要废弃Token。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;怎样保持客户端长时间保持登录状态？&lt;/p&gt;
&lt;p&gt;服务器端提供刷新Token的接口， 客户端负责按一定的逻辑刷新服务器Token。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;服务器端是否应该从JWT中取出userid用于业务查询？&lt;/p&gt;
&lt;p&gt;REST API是无状态的，意味着服务器端每次请求都是独立的，即不依赖以前请求的结果，因此也不应该依赖JWT token做业务查询， 应该在请求报文中单独加个userid 字段。&lt;br&gt;为了做用户水平越权的检查，可以在业务层判断传入的userid和从JWT token中解析出的userid是否一致， 有些业务可能会允许查不同用户的数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;JWT 在Java项目中如何实现？&lt;/p&gt;
&lt;p&gt;生成Token&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;String token = Jwts.builder().setSubject(userId)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        .setExpiration(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Date(System.currentTimeMillis() + Constant.TOKEN_EXP_TIME))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        .claim(&lt;span class=&quot;string&quot;&gt;&quot;roles&quot;&lt;/span&gt;, Constant.USER_TYPE_EMP).setIssuedAt(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Date())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        .signWith(SignatureAlgorithm.HS256, Constant.JWT_SECRET).compact();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;loginResponse.setToken(token);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;验证JWT Token&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; String authHeader = request.getHeader(&lt;span class=&quot;string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (authHeader == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; || !authHeader.startsWith(&lt;span class=&quot;string&quot;&gt;&quot;Bearer &quot;&lt;/span&gt;)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   log.debug(&lt;span class=&quot;string&quot;&gt;&quot;no Authorization &quot;&lt;/span&gt;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; String token = authHeader.substring(&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;// The part after &quot;Bearer &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.debug(&lt;span class=&quot;string&quot;&gt;&quot;token &quot;&lt;/span&gt; + token);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Claims claims = Jwts.parser().setSigningKey(Constant.JWT_SECRET)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .parseClaimsJws(token).getBody();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.debug(claims.toString());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123; &lt;span class=&quot;comment&quot;&gt;//包含超时，签名错误等异常&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.debug(&lt;span class=&quot;string&quot;&gt;&quot;JWT Exception&quot;&lt;/span&gt;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意客户端发送的Authorization HTTP HEADER格式是 “Bearer YOUR_JWT_TOKEN”,这是OAuth的规范规定的。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近做基于&lt;a href=&quot;http://samnewman.io/patterns/architectural/bff/&quot;&gt;BFF架构&lt;/a&gt;的分布式移动端API接口的系统设计。工作过程中发现有些工程师对JWT安全验证的认识存在一些偏差，重复讲解实在太麻烦了，在这里把关于JWT常见的一些疑问统一回答下吧。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;什么是JWT？&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://tools.ietf.org/html/rfc7519&quot;&gt;JSON Web Token (JWT)&lt;/a&gt;是一种基于 token 的认证方案。&lt;br&gt;JSON Web Tokens are an open, industry standard &lt;a href=&quot;https://tools.ietf.org/html/rfc7519&quot;&gt;RFC 7519&lt;/a&gt; method for representing claims securely between two parties.&lt;br&gt;简单的说，JWT就是一种Token的编码算法，服务器端负责根据一个密码和算法生成Token，然后发给客户端，客户端只负责后面每次请求都在HTTP header里面带上这个Token，服务器负责验证这个Token是不是合法的，有没有过期等，并可以解析出subject和claim里面的数据。&lt;/p&gt;
&lt;p&gt;注意JWT里面的数据是BASE64编码的，没有加密，因此不要放如敏感数据。&lt;/p&gt;
&lt;p&gt;可以通过&lt;a href=&quot;https://jwt.io/这个网站对JWT&quot;&gt;https://jwt.io/这个网站对JWT&lt;/a&gt; Token进行解析。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>如何做一场像TED一样精彩的技术演讲</title>
    <link href="http://offbye.com/2016/06/29/%E5%A6%82%E4%BD%95%E5%81%9A%E4%B8%80%E5%9C%BA%E5%83%8FTed%E4%B8%80%E6%A0%B7%E7%B2%BE%E5%BD%A9%E7%9A%84%E6%8A%80%E6%9C%AF%E6%BC%94%E8%AE%B2/"/>
    <id>http://offbye.com/2016/06/29/如何做一场像Ted一样精彩的技术演讲/</id>
    <published>2016-06-29T01:33:55.000Z</published>
    <updated>2016-07-04T05:44:01.000Z</updated>
    
    <content type="html">&lt;p&gt;最近几个月由于准备演讲的原因，反复看了几遍《像TED一样演讲》这本书，并看了大量的TED演讲，感触颇深，学到了很多演讲的技巧和误区。最近我在南京软件开发者大会和全球移动技术大会做了2场还算精彩的技术演讲，大量应用了书中的一些思想，演讲现场听众的反馈情况还不错。参加技术大会演讲是成为技术大牛的重要道路之一，那么我们怎样才能做一场精彩而不枯燥的技术演讲呢？&lt;/p&gt;
&lt;p&gt;我们先分析下技术演讲和典型的TED演讲的差别。首先是演讲内容和面对的观众不同。技术演讲的内容一般都有一定的技术门槛，很多时候外行是不容易有较深入的理解的，听众有着明显的局限性，一般都是某个领域的技术和业务人员，同时听众的专业能力差别还有比较大的，专家、一般水平和新手的听众人数一般是金字塔分布，因此需要照顾不同水平的人对内容的接受度和想法。TED演讲的观众则比较广泛，演讲需要简洁生动，具备传播属性。然后是演讲时间长度不一样，典型的TED演讲的时间一般是6-18分钟，技术演讲的时间一般是40分钟，因此TED演讲是更困难的，因为你需要在更短的时间内抓住听众的注意力，让听众接受你的观点。技术演讲由于时间相对较长，可以进行一些比较深入的探讨，但是也需要考虑到听众的注意力，需要在演讲过程中想办法活跃气氛。&lt;/p&gt;
&lt;p&gt;接下来我从演讲主题选择，演讲内容设计和PPT制作，如何做个好的开场，如何做好演讲时间控制等方面，详细探讨下如何一场精彩的技术演讲。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;首先要有一个好的技术演讲主题，什么是好的主题呢？ 好的主题首先意味着你对这个主题要有热情，要有特别的见解。例如你比多数人更早的关注一门新技术，有热情把它介绍给更多的人；你在某个技术领域有着丰富的实践经验，想和别人分享；你对某个技术领域研究比较深入，做了个开源项目，想让更多的人知道和使用等。一定要挖掘出自己和演讲主题之间独特而有意义的连接点，这样才可以激发自己对演讲主题的热情，然后你才能用热情感染观众。&lt;/p&gt;
&lt;p&gt;演讲主题需要主题明确，范围清晰，逻辑严密。要对演讲的内容保持节制，主题无关的内容不要轻易加入到PPT中。主题不宜太大太宽泛，范围需要清楚明确，最好能做到让人看到题目就能知道大概是讲哪方面的内容。演讲主题太大是新手最容易犯的错误之一，总想做自己演讲中塞入太多的东西，导致主题不明确，没有重点，让人听完后感觉不记得都讲了些什么。&lt;/p&gt;
&lt;p&gt;另外需要注意的是，特别干货的技术内容并不太适合拿来做一场精彩的演讲，更适合作为文章发表。例如现场介绍和推导某个算法，大量复杂代码的讲解等。除非你有高超的演讲技巧，并且台下的观众都很专业，否则很难把这类主题讲精彩。现在的一些技术大会由于观众水平参差不齐，技术背景和经验都不一样，因此太干货的内容并不容易受到多数人的欢迎，反而有催眠效果。&lt;/p&gt;
&lt;p&gt;你对自己的演讲主题必须有深刻地认识，包括涉及的每个技术细节都需要很清楚，这样才能有足够的信心做好演讲，深入浅出地讲出来，也才能比较优雅地面对观众的提问。我参加的每场演讲都会把涉及的每个技术细节都弄清楚，演讲PPT不允许出现任何细节错误，并对观众可能提出的问题进行事先准备。&lt;/p&gt;
&lt;p&gt;定好主题后，需要从观众的角度看待这个主题，也就是换位思考，如果你是观众你会不会想听这个主题？你想从这场演讲了解到些什么？怎样才能引起观众的兴趣，激发观众的共鸣？&lt;/p&gt;
&lt;p&gt;然后可以针对主题做个信息视图了，信息视图就是你演讲内容的层次结构图，一般可以是层次结构图或流程图，相对传统的目录结构，用信息视图可以更好帮你理清演讲的内容逻辑。可以用Powerpoint的SmartArt功能，流程图软件或思维导图软件制作信息视图。在演讲中需要尽早的把信息视图讲给观众，以便让大家对你的演讲有整体的认识，也可以在最后演讲总结时把信息视图总结给大家，我一般是在介绍完演讲主题后就讲解本次演讲的信息视图或目录结构。因为观众基本上都是技术人员，思维逻辑性一般都比较强，因此演讲内容之间需要用强逻辑关联起来，并在演讲过程中注意强调当前演讲的层次，这样能够让人感觉演讲内容很连贯，很有逻辑，也有助于观众保持清晰的思路跟上你的演讲节奏。&lt;/p&gt;
&lt;p&gt;如何做一个好的技术演讲开场，这个需要根据你的主题来定。首先你可以根据演讲主题介绍下自己的背景，要讲和演讲相关的内容，说明你为什么要做这场演讲，为什么由你来给大家讲这个主题。然后可以讲个简单的故事，需要能引起观众的共鸣，拉近和观众的距离。也可以做几个现场互动提问，了解观众的组成情况，活跃现场的气氛，缓解自己的紧张状态。还可以做些适当的安排，留一些后面会解答的悬念。&lt;/p&gt;
&lt;p&gt;下面进入演讲的内容部分了，从TED演讲学来的一个有用的技巧是用好3这个数字，3点内容是最容易让人记住的，例如把观点总结成3个重点，比提出5个以上重点要更容易让人记住，也更有利于传播。PPT上不要放很多文字，TED的建议是一页PPT最多不要超过40个词，对于技术演讲来说，这个限制有时并不适合，例如你需要讲解代码时。但是，我们需要保持PPT的简洁，PPT上放太多内容会让观众更关注读PPT上的文字而不是听你演讲，所以时刻要抵挡把太多文字内容放在PPT上的诱惑，你可以把它们放到演讲者备注里面，然后在PPT上放一张精彩的图片代替，图片可以用关键词在谷歌图片上找，然后演讲时把文字内容讲出来，并和图片建立链接，视觉化的内容更有利于观众记忆。&lt;/p&gt;
&lt;p&gt;关于数据，很多技术演讲都需要用数据证明你的观点。TED演讲介绍的一种专业做法是每张幻灯片只放一个数据，这样更容易让人印象深刻，增强说服力。一页PPT不要放很多数据，可以用各种图表代替数据表。还可以通过对坐标轴做处理强化你的数据对比效果，我记得淘宝的一些技术演讲用过这个方法，但这种小把戏最好不要玩，因为做技术的人一般对数据都挺敏感的。&lt;br&gt;&lt;!-- http://www.offbye.com --&gt;&lt;/p&gt;
&lt;p&gt;接下来讲下时间控制问题。一般TED演讲是6-18分钟，而现在一般技术演讲是45分钟，其中演讲时间是40分钟，最后留五分钟提问时间，因此技术演讲可以讲的更多更深一点。技术演讲同样需要严格控制好时间，一般PPT准备25页左右就差不多了，如果包含动画和快速带过的页面可以适当增加，一般不要超过50页，新手容易犯放太多内容在PPT里面这个错误。参加过那么多次技术大会，我还没有见过提前很多时间讲完PPT的，很多人都是在最后讲不完PPT，在最后五分钟提示时匆匆忙忙地翻后面一半的PPT，然后这场技术演讲基本上就失败了。即使你提前5分钟讲完了，多安排点提问交流时间也就可以了。为了做好时间控制，正式演讲前可以先进行几次小范围的试讲，自己对着镜子讲也可以，还可以用Powerpoint的排练计时功能记录每页演讲的时间，并进行分析。保存排练记时后，Powerpoint在下次演示时可以根据时间自动翻页，但一般不要这样做，这样演讲感觉会不够自然，不好即兴发挥。&lt;/p&gt;
&lt;p&gt;连续讲40分钟技术对观众的注意力是个很大的挑战，除非你讲的特别风趣幽默，但多数技术人员做不到这一点，因此演讲中间安排几次互动环节是很有必要的，例如提问和简单演示，可以帮助观众恢复注意力。注意现场演示是个坑，很容易出状况，需要做好各种预防措施，特别是涉及网络和服务器的要特别注意提前现场测试确认好，演示电脑一定要用自己的，可以有效避免各种演示问题。&lt;/p&gt;
&lt;p&gt;最后总结一下，本文结合《像TED一样演讲》书中介绍的思想和方法，探讨了如何做一场精彩的技术演讲。在演讲主题选择，演讲内容设计和PPT制作，如何做个好的开场，如何做好演讲时间控制等方面，提出了一些思路和实践。&lt;/p&gt;
&lt;p&gt;希望各位做技术的同学在未来都能做一场精彩的技术演讲！&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近几个月由于准备演讲的原因，反复看了几遍《像TED一样演讲》这本书，并看了大量的TED演讲，感触颇深，学到了很多演讲的技巧和误区。最近我在南京软件开发者大会和全球移动技术大会做了2场还算精彩的技术演讲，大量应用了书中的一些思想，演讲现场听众的反馈情况还不错。参加技术大会演讲是成为技术大牛的重要道路之一，那么我们怎样才能做一场精彩而不枯燥的技术演讲呢？&lt;/p&gt;
&lt;p&gt;我们先分析下技术演讲和典型的TED演讲的差别。首先是演讲内容和面对的观众不同。技术演讲的内容一般都有一定的技术门槛，很多时候外行是不容易有较深入的理解的，听众有着明显的局限性，一般都是某个领域的技术和业务人员，同时听众的专业能力差别还有比较大的，专家、一般水平和新手的听众人数一般是金字塔分布，因此需要照顾不同水平的人对内容的接受度和想法。TED演讲的观众则比较广泛，演讲需要简洁生动，具备传播属性。然后是演讲时间长度不一样，典型的TED演讲的时间一般是6-18分钟，技术演讲的时间一般是40分钟，因此TED演讲是更困难的，因为你需要在更短的时间内抓住听众的注意力，让听众接受你的观点。技术演讲由于时间相对较长，可以进行一些比较深入的探讨，但是也需要考虑到听众的注意力，需要在演讲过程中想办法活跃气氛。&lt;/p&gt;
&lt;p&gt;接下来我从演讲主题选择，演讲内容设计和PPT制作，如何做个好的开场，如何做好演讲时间控制等方面，详细探讨下如何一场精彩的技术演讲。&lt;br&gt;
    
    </summary>
    
    
      <category term="技术演讲" scheme="http://offbye.com/tags/%E6%8A%80%E6%9C%AF%E6%BC%94%E8%AE%B2/"/>
    
      <category term="TED" scheme="http://offbye.com/tags/TED/"/>
    
      <category term="演讲技巧" scheme="http://offbye.com/tags/%E6%BC%94%E8%AE%B2%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>GMTC2016移动技术大会参会感想</title>
    <link href="http://offbye.com/2016/06/28/GMTC2016%E7%A7%BB%E5%8A%A8%E6%8A%80%E6%9C%AF%E5%A4%A7%E4%BC%9A%E5%8F%82%E4%BC%9A%E6%84%9F%E6%83%B3/"/>
    <id>http://offbye.com/2016/06/28/GMTC2016移动技术大会参会感想/</id>
    <published>2016-06-28T10:19:43.000Z</published>
    <updated>2016-06-28T10:29:09.000Z</updated>
    
    <content type="html">&lt;p&gt;6月24日参加InfoQ举办的GMTC移动技术大会，并做了一场演讲，还参加了晚上的Swift3.0闭门交流会议，受益很多。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;6月24日上午是全体大会，首先是手机淘宝的长恭，微信的赵原，京东的王永杰做了移动未来开发展望的开场演讲。然后是Facebook早期员工覃超做了Facebook App演进过程的演讲，主要介绍了Facebook App各个版本的技术实现和经验总结，印象比较深的有下面几点：要选择对用户优化的技术而不是对开发团队优化的技术；现在FacebookApp已经是通过appurl scheme跳转的组件化项目，主要是iOS原生技术实现，Facebook已经有1000多iOS工程师，整个项目只有一个codebase，使用Mercurial做版本管理，git已经太卡了,使用Buck编译项目;新技术的接受曲线，到达高潮后会有一个低谷，然后走向正常的发展阶段。&lt;/p&gt;
&lt;p&gt;然后是Square的邵震的演讲Mobile Growth的方法和实践，是近几年流行的增长黑客相关的实践，介绍了Growth实践中的一些心得，最重要的是留存，工程师驱动，通过高层战略推动底层执行。然后介绍了一些A/B Testing系统的实践。Deep Link的趋势和使用，就是通过一些网页链接进入App。&lt;/p&gt;
&lt;p&gt;下午的演讲分三个分会场，我主要参加了Swift分会场和插件化分会场。Swift分会场第一场是傅若愚的Swift函数式编程，函数式编程是个不太容易讲的话题，主要是涉及的概念比较多，这个演讲有比较易懂的方式介绍了函数式编程。&lt;/p&gt;
&lt;p&gt;Swift分会场第二场是我的演讲From Java/Android To Swift iOS，主要是分享Android开发者如何快速上手Swift开发，以及一些Swift项目经验和开源框架，还介绍了Swift3.0的一些新特性，感兴趣的可以下载ppt看看。&lt;/p&gt;
&lt;p&gt;然后去了插件化专场，听林光亮介绍了Small插件化插件，他主要先分析了Android插件化的各种技术和插件化框架，然后介绍了small插件化框架的实现思路和技术实现。﻿这个插件化方案我感觉是目前比较合理的，技术上也比较先进，希望后面项目能用上。&lt;/p&gt;
&lt;p&gt;最后是聚划算的朴诚介绍聚划算的Luaview动态化开发实践，LuaviewSDK提供了一种动态化能力，适合原生App的某些页面嵌入动态内容，性能很好，和React Native，weex等插件化方案比较，是一种更轻量的插件化方案。&lt;/p&gt;
&lt;p&gt;25日上午参加的是架构演进专场，第一场是手机天猫解耦之路，介绍了天猫iOS App演进过程和组件化开发技术，通过BeeHive框架实现解耦依赖，统跳协议解耦界面，印象深刻的是活用了Web服务器的UrlRewrite技术，通过正则表达式Rewrite URL。&lt;/p&gt;
&lt;p&gt;第二场是滴滴李贤辉滴滴iOS组件化优化与实践。介绍了滴滴iOS App组件化的背景，70个开发人员，7条业务线，70万代码。代码冲突多，发布困难。介绍了一些组件化的专项技术，业务线接入，页面结构，导航管理组件，共享地图组件，灰度系统apollo等，干货很多，值得回去仔细研究学习。&lt;/p&gt;
&lt;p&gt;上午第三场是iOS遗留代码重构，从CoreData迁移到Realm说起。﻿介绍了抽象分支的概念，通过抽象层替换旧代码模块。特性开关，4种实现方式，如后台服务，ab test框架。通过适配器模式透明支持CoreData和RealmDB持久化服务。最后介绍了Realm的坑，不支持集联删除，不支持多态，难以理解的反向关联。遗留代码的重构确实是个麻烦的事情，这个演讲对iOS项目的重构有一定参考价值。&lt;/p&gt;
&lt;p&gt;下午参加了性能优化专场，第一场是微信叶润桂的演讲《微信客户端怎样应对弱网络》﻿。前面主要介绍介绍了针对TCP/IP协议的移动网络优化，介绍了各种算法。﻿然后讲解了微信发图片协议合并优化，上传图片后，由图片服务器直接通过内网和业务服务器通信。﻿低成本重传，降低重传的包大小，或使用流式协议。渐进式图片，有损上传和下载。最后安利了后面打算开源的Mars跨平台开源网络组件。&lt;/p&gt;
&lt;p&gt;第二场是杨刚的360手机卫士性能优化之路，首先介绍了性能优化的各种问题，lint和Findbugs，自有代码检测工具，基于jenkins平台的检测系统。AspectJ重写器，实现网络静态埋点的例子。然后介绍了性能监控，进程的冷热启动等。由于360手机卫士总是优化手机杀其他App的进程，这兄弟提问环节被问的比较郁闷。&lt;/p&gt;
&lt;p&gt;最后听的演讲是支付宝App的性能稳定性和运维实践，介绍了支付宝App3个阶段的架构演进，性能优化实践和超级App的运维体系介绍。&lt;/p&gt;
&lt;p&gt;整个大会大概有30多场演讲，很多都是各大公司的实践经验分享，干货很多，对我来说帮助比较大的是安卓的插件化和iOS的组件化开发，由于业务发展需要，这些技术后面需要逐步引入了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;6月24日参加InfoQ举办的GMTC移动技术大会，并做了一场演讲，还参加了晚上的Swift3.0闭门交流会议，受益很多。&lt;/p&gt;
    
    </summary>
    
    
      <category term="GMTC2016" scheme="http://offbye.com/tags/GMTC2016/"/>
    
      <category term="移动技术大会" scheme="http://offbye.com/tags/%E7%A7%BB%E5%8A%A8%E6%8A%80%E6%9C%AF%E5%A4%A7%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>Mac下配置Docker Kitematic使用Proxy加速镜像下载Swift Kitura镜像</title>
    <link href="http://offbye.com/2016/06/21/Mac%E4%B8%8B%E9%85%8D%E7%BD%AEDocker-Kitematic%E4%BD%BF%E7%94%A8Proxy%E5%8A%A0%E9%80%9F%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6/"/>
    <id>http://offbye.com/2016/06/21/Mac下配置Docker-Kitematic使用Proxy加速镜像下载速度/</id>
    <published>2016-06-21T14:12:51.000Z</published>
    <updated>2016-06-22T07:57:33.000Z</updated>
    
    <content type="html">&lt;p&gt;这几天打算折腾下&lt;a href=&quot;https://github.com/IBM-Swift/Kitura&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IBM的Swift Kitura&lt;/a&gt;服务器端框架，按照官方的说明下载kitura-ubuntu docker镜像，结果发现实在是太慢了，于是请教了运维龚总，通过设置公司的docker proxy进行加速，速度果然快，几分钟就下载完了，太给力了。当然也可以用Daocloud的代理啊。下面记录下设置过程。&lt;br&gt;kitematic是docker推出的GUI工具，使操作docker的方式变得更简单直观&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;进入到docker-machine&quot;&gt;&lt;a href=&quot;#进入到docker-machine&quot; class=&quot;headerlink&quot; title=&quot;进入到docker machine&quot;&gt;&lt;/a&gt;进入到docker machine&lt;/h2&gt;&lt;p&gt;我们首先进入到docker machine&lt;/p&gt;
&lt;p&gt;确保docker machine已经运行，如果你已经打开了kitematic，docker machine已经是运行状态&lt;br&gt;//若未运行，可以通过kitematic或输入以下命令运行docker-machine&lt;br&gt;&lt;code&gt;docker-machine start default&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;//通过终端进入docker machine&lt;br&gt;&lt;code&gt;docker-machine ssh default&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;//如果看见如下标志则已经进入docker-machine&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;                       &lt;span class=&quot;comment&quot;&gt;##         .&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &lt;span class=&quot;comment&quot;&gt;## ## ##        ==&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               &lt;span class=&quot;comment&quot;&gt;## ## ## ## ##    ===&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           /&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;\___/ ===&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ~~~ &amp;#123;~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           \______ o           __/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             \    \         __/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              \____\_______/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; _                 _   ____     _            _&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| &#39;_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ &#39;__|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   &amp;lt;  __/ |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Boot2Docker version 1.11.0, build HEAD : 32ee7e9 - Wed Apr 13 20:06:49 UTC 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Docker version 1.11.0, build 4dc5990&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker@default:~$&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;修改boot2docker配置文件&quot;&gt;&lt;a href=&quot;#修改boot2docker配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改boot2docker配置文件&quot;&gt;&lt;/a&gt;修改boot2docker配置文件&lt;/h2&gt;&lt;p&gt;//用vi修改配置文件&lt;br&gt;&lt;code&gt;sudo vi /var/lib/boot2docker/profile&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;//我们在配置文件最后加入两行http及https代理设置&lt;br&gt;export HTTP_PROXY=&lt;a href=&quot;http://192.168.1.102:8118&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://192.168.1.102:8118&lt;/a&gt;&lt;br&gt;export HTTPS_PROXY=&lt;a href=&quot;http://192.168.1.102:8118&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://192.168.1.102:8118&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;重启docker-machine&quot;&gt;&lt;a href=&quot;#重启docker-machine&quot; class=&quot;headerlink&quot; title=&quot;重启docker-machine&quot;&gt;&lt;/a&gt;重启docker-machine&lt;/h2&gt;&lt;p&gt;//重启docker-machine使其生效&lt;br&gt;&lt;code&gt;docker-machine restart default&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;测试代理下载速度&quot;&gt;&lt;a href=&quot;#测试代理下载速度&quot; class=&quot;headerlink&quot; title=&quot;测试代理下载速度&quot;&gt;&lt;/a&gt;测试代理下载速度&lt;/h2&gt;&lt;p&gt;//重新进入到docker-machine&lt;br&gt;&lt;code&gt;docker-machine ssh default&lt;/code&gt;&lt;br&gt;/我们测试pull一个ghost博客的镜像试试看，速度果然快&lt;br&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker@default&lt;span class=&quot;symbol&quot;&gt;:~&lt;/span&gt;$ docker pull kitematic/ghost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Using default &lt;span class=&quot;symbol&quot;&gt;tag:&lt;/span&gt; latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;latest:&lt;/span&gt; Pulling from kitematic/ghost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;a3ed95caeb02:&lt;/span&gt; Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;f5424ebd796:&lt;/span&gt; Downloading [=======&amp;gt;                                           ] &lt;span class=&quot;number&quot;&gt;5.275&lt;/span&gt; MB/&lt;span class=&quot;number&quot;&gt;37.22&lt;/span&gt; MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;fb8f734fb80f:&lt;/span&gt; Downloading [==&amp;gt;                                                ] &lt;span class=&quot;number&quot;&gt;3.735&lt;/span&gt; MB/&lt;span class=&quot;number&quot;&gt;78.27&lt;/span&gt; MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;e97c18a7d689:&lt;/span&gt; Downloading [===&amp;gt;                                               ] &lt;span class=&quot;number&quot;&gt;3.162&lt;/span&gt; MB/&lt;span class=&quot;number&quot;&gt;44.29&lt;/span&gt; MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;dcf0f0808fac:&lt;/span&gt; Waiting&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;docker pull命令其实和在kitematic中点击create的效果是一样的&lt;/p&gt;
&lt;p&gt;最后展示下kitura框架吧，服务器端的swift啊。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/9a59727af2ad4ded0843ccb3efb9ca1e.png&quot; alt=&quot;IBm Kitura&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这几天打算折腾下&lt;a href=&quot;https://github.com/IBM-Swift/Kitura&quot;&gt;IBM的Swift Kitura&lt;/a&gt;服务器端框架，按照官方的说明下载kitura-ubuntu docker镜像，结果发现实在是太慢了，于是请教了运维龚总，通过设置公司的docker proxy进行加速，速度果然快，几分钟就下载完了，太给力了。当然也可以用Daocloud的代理啊。下面记录下设置过程。&lt;br&gt;kitematic是docker推出的GUI工具，使操作docker的方式变得更简单直观&lt;br&gt;
    
    </summary>
    
    
      <category term="Mac" scheme="http://offbye.com/tags/Mac/"/>
    
      <category term="Docker" scheme="http://offbye.com/tags/Docker/"/>
    
      <category term="Kitematic" scheme="http://offbye.com/tags/Kitematic/"/>
    
      <category term="proxy" scheme="http://offbye.com/tags/proxy/"/>
    
      <category term="Swift" scheme="http://offbye.com/tags/Swift/"/>
    
      <category term="Kitura" scheme="http://offbye.com/tags/Kitura/"/>
    
  </entry>
  
  <entry>
    <title>初探Swift 3.0的重大变化</title>
    <link href="http://offbye.com/2016/06/18/%E5%88%9D%E6%8E%A2Swift-3-0/"/>
    <id>http://offbye.com/2016/06/18/初探Swift-3-0/</id>
    <published>2016-06-18T14:10:27.000Z</published>
    <updated>2016-06-22T06:56:51.000Z</updated>
    
    <content type="html">&lt;p&gt;这个周末抽空看了WWDC2016关于Swift 3.0的的演讲视频，初步感受了下Swift3.0，Swift3.0相对Swift2.2有很大的变化。&lt;br&gt;比较重要的演讲是Swift API Design Guidelines和What is new in Swift。Swift3.0的Swift的第3个主要版本，目标是安全，快速和有表现力，也是第一个有开源社区参与开发的Swift版本。由于语法和API改动比较多，Xcode 8.0 Beta提供了migrate迁移工具。这样自有的代码升级Swift3.0就比较方便了，但是，关键是要等第三方开源库升级到Swift3.0啊。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/03b109dff53efac1cc108602e1bba9e8.png&quot; alt=&quot;Swift3.0 Preview 1 Released&quot;&gt;&lt;/p&gt;
&lt;p&gt;Swift3.0的路线图主要是下面3点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Swift API Design Guidelines&lt;/li&gt;
&lt;li&gt;The Grand Renaming&lt;/li&gt;
&lt;li&gt;Mapping Objective-C APIs into Swift&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;主要目标是明确语言的设计理念，提出了Swifty的概念。以前提出ABI stability（二进制接口稳定）被推迟实现了。&lt;/p&gt;
&lt;p&gt;以前从Objective-C移植过来的那些繁琐的函数名终于在Swift3.0中被去掉了，这真是一个好消息，早就受不了那种OC风格的繁琐冗余的函数名了。&lt;br&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/00d5f39c6c11a8a04b04092ba5d18a41.png&quot; alt=&quot;old NSURL&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/9b8761c536ad846058d6b42b41bd2a89.png&quot; alt=&quot;swift 3.0 URL&quot;&gt;&lt;br&gt;可以看到Swift3.0不仅简化了方法名，还提供了一个NSURL的替代URL。&lt;/p&gt;
&lt;p&gt;Swift API的设计原则主要有下面三点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Clarityat the Point of use  is your most important goal&lt;br&gt;最重要的目标是清晰明确&lt;/li&gt;
&lt;li&gt;Clarity is more important than brevity&lt;br&gt;明确重于简洁&lt;/li&gt;
&lt;li&gt;Concise Code is consequence of using contextual cues&lt;br&gt;简洁的代码是使用上下文线索的结果&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总之，Swift3.0的这次升级变化还是挺大的，语法更加明确和简洁，以前Objective-C那些繁琐的方法名也被替代了，在开源社区的帮助下，向着现代化跨平台通用编程语言的目标又近了一大步。&lt;/p&gt;
&lt;p&gt;最后值得一提的是IBM在Swift服务端的工作，发布了IBM Swift Sandbox，就是个基于Swift3.0 linux版本的在线Playground。IBM还发布了一个基于Swift的类似Node.js Express框架的Web开发和服务器框架Kitura。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/5eecc83f841d72a8547ab9f757d3b69a.png&quot; alt=&quot;swift sandbox&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这个周末抽空看了WWDC2016关于Swift 3.0的的演讲视频，初步感受了下Swift3.0，Swift3.0相对Swift2.2有很大的变化。&lt;br&gt;比较重要的演讲是Swift API Design Guidelines和What is new in Swift。Swift3.0的Swift的第3个主要版本，目标是安全，快速和有表现力，也是第一个有开源社区参与开发的Swift版本。由于语法和API改动比较多，Xcode 8.0 Beta提供了migrate迁移工具。这样自有的代码升级Swift3.0就比较方便了，但是，关键是要等第三方开源库升级到Swift3.0啊。&lt;br&gt;
    
    </summary>
    
    
      <category term="Swift 3.0" scheme="http://offbye.com/tags/Swift-3-0/"/>
    
      <category term="API" scheme="http://offbye.com/tags/API/"/>
    
  </entry>
  
  <entry>
    <title>怎样高效统计Android开源库的方法数</title>
    <link href="http://offbye.com/2016/06/13/%E6%80%8E%E6%A0%B7%E9%AB%98%E6%95%88%E7%BB%9F%E8%AE%A1Android%E5%BC%80%E6%BA%90%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95%E6%95%B0/"/>
    <id>http://offbye.com/2016/06/13/怎样高效统计Android开源库的方法数/</id>
    <published>2016-06-13T11:36:11.000Z</published>
    <updated>2016-06-13T09:31:48.000Z</updated>
    
    <content type="html">&lt;p&gt;大家都知道， Android App一直有65k方法数的问题，当然我们可以用multidex的各种方法解决，就是比较麻烦。一般方法数超过65K的原因是引入了太多第三方开源库的原因，那么我们怎么才能知道哪些开源库占用了多少方法呢？以便可以有针对性的减少方法数。&lt;/p&gt;
&lt;p&gt;今天发现Android Studio有个插件&lt;a href=&quot;http://plugins.jetbrains.com/plugin/8076?pr=androidstudio&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android Methods Count&lt;/a&gt;很好的做了这个事情，赞一个啊。直接在Android Studio搜索插件名字并安装，重启Android Studio后打开build.gradle文件，等待一会就可以看各个第三方库的方法数了。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如下图&lt;br&gt;&lt;img src=&quot;http://www.methodscount.com/images/methods-count-plugin-2.png&quot; alt=&quot;method count&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击页面右边的蓝色圆圈可以跳到网站&lt;a href=&quot;http://www.methodscount.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.methodscount.com/&lt;/a&gt; 查询开源库及其依赖的库的方法数详情。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/5f1cb177b7f2b434bf80f056f526d8d7.png&quot; alt=&quot;methodscountdetail&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果有人已经查过了某个版本的开源库，网站会缓存结果，立即就会给出结果；没有查过则网站会去分析开源库，并算出方法数，这个过程可能需要等待几分钟。网页给出了方法数统计，依赖的库， 还可以以图表形式展示开源库各个版本的方法数和Dex文件Size变化情况。&lt;br&gt;知道了第三方开源库的方法数，就可以有针对性的对方法数进行优化了。&lt;br&gt;￼￼&lt;/p&gt;
&lt;p&gt;[本文独立博客地址](&lt;a href=&quot;http://www.offbye.com）&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.offbye.com）&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;大家都知道， Android App一直有65k方法数的问题，当然我们可以用multidex的各种方法解决，就是比较麻烦。一般方法数超过65K的原因是引入了太多第三方开源库的原因，那么我们怎么才能知道哪些开源库占用了多少方法呢？以便可以有针对性的减少方法数。&lt;/p&gt;
&lt;p&gt;今天发现Android Studio有个插件&lt;a href=&quot;http://plugins.jetbrains.com/plugin/8076?pr=androidstudio&quot;&gt;Android Methods Count&lt;/a&gt;很好的做了这个事情，赞一个啊。直接在Android Studio搜索插件名字并安装，重启Android Studio后打开build.gradle文件，等待一会就可以看各个第三方库的方法数了。&lt;br&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://offbye.com/tags/Android/"/>
    
      <category term="方法数" scheme="http://offbye.com/tags/%E6%96%B9%E6%B3%95%E6%95%B0/"/>
    
      <category term="统计" scheme="http://offbye.com/tags/%E7%BB%9F%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>从共享经济的边界看专车市场的未来</title>
    <link href="http://offbye.com/2016/06/10/%E4%BB%8E%E5%85%B1%E4%BA%AB%E7%BB%8F%E6%B5%8E%E7%9A%84%E8%BE%B9%E7%95%8C%E7%9C%8B%E4%B8%93%E8%BD%A6%E5%B8%82%E5%9C%BA%E7%9A%84%E6%9C%AA%E6%9D%A5/"/>
    <id>http://offbye.com/2016/06/10/从共享经济的边界看专车市场的未来/</id>
    <published>2016-06-10T01:57:51.000Z</published>
    <updated>2016-06-13T09:28:47.000Z</updated>
    
    <content type="html">&lt;p&gt;作为一个懒散的业余顺风车司机，最近经常收到专车平台关于突发情况的短信提醒，听说南京出租车司机和专车司机最近有些冲突，原因当然是出租车司机认为专车司机抢了生意，而自己还需要承担每个月七千以上的份子钱，心里当然不爽了。但是，专车不是分享经济吗？只是顺路接单啊，怎么会对出租车的生意造成这么严重的影响呢？原因之一可能是大多数专车司机已经是职业化了，并且感觉司机平台的多单奖励制度也鼓励了专车的职业化行为，需要上班的顺风车肯定不可能在早高峰去接很多单啊，拼车等人，绕路都要花时间，上班迟到是要罚钱的，但职业司机就没有这个问题了。&lt;/p&gt;
&lt;p&gt;专车市场到底会怎样发展呢？我认为后面专车的车辆产权会由租车公司和出行平台共同拥有；专车司机会职业化，和平台签劳动协议，并经过专业化培训；专车会在交通部门的严格监管下运营；做专车司机的门槛将逐步提高，私家车司机将逐步推出专车行列。对于传统出租车行业来说，未来可能在某些城市被出行平台收编，当然中间肯定需要经过各方的利益博弈。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;分享经济的核心是资源的按需分配，既合理调配又极大化利用闲置资源，毫无疑问，只有在移动互联网时代，供需信息借助技术手段实现透明，共享经济的模式才有可能真正运行起来。因此，在租房领域诞生了Airbnb,在出行领域出现了Uber和滴滴这些互联网独角兽公司。 这些平台的出现，确实给人们带来了极大的便利，解决了供需信息的不对称性和闲置资源的分配问题，但同时也带来了一些新问题，对传统行业的冲击，安全问题和监管问题等。&lt;/p&gt;
&lt;p&gt;分享经济的优势是盘活闲置的社会资源，提供给更多需要的人，同时获取一定的报酬。但共享经济显然是存在边界的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;知名 IT 评论人 Keso 在《分享经济的边界》一文中表达了其对分享经济的看法。他认为，“两方面的因素综合作用，将导致分享经济很快就抵达它的边界。其一是受益于分享经济，越来越多的人会更愿意购买资源的使用权，而不是购买资源的所有权，这将导致不再有可供分享的物质资源；其二是人的趋利性导致职业化服务提供将逐渐挤出业余化服务提供，谋生者挤出分享者，在此过程中不断降低成本以最大化收益。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;分享经济的边界看上去还是很有道理的。由分享经济的边界，我联想到了科斯的企业的边界。经济学家科斯提出了著名的科斯定理，我们也可以试着用它来分析一下拼车这种共享经济。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;科斯定理(Coase theorem)由罗纳德·科斯（Ronald Coase）提出的一种观点，认为在某些条件下，经济的外部性或曰非效率可以通过当事人的谈判而得到纠正，从而达到社会效益最大化。科斯本人从未将定理写成文字，而其他人如果试图将科斯定理写成文字，则无法避免表达偏差。关于科斯定理，比较流行的说法是：只要财产权是明确的，并且交易成本为零或者很小，那么，无论在开始时将财产权赋予谁，市场均衡的最终结果都是有效率的，实现资源配置的帕雷托最优。&lt;br&gt;科斯认为，企业规模的边界就在企业内部组织一项交易费用的成本等于通过市场开展这项交易的成本之处。所以，企业有扩张的倾向，直至达到这个边界。另一方面，科技和管理的的的提升，有助于降低交易费用，也就是扩大企业的边界。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;对于没有学习过经济学的人来说，上面这段话可能有些抽象，简单来说只要财产权是明确的，并且交易成本为零或者很小，那么，无论在开始时将财产权赋予谁，市场均衡的最终结果都是有效率的。如果我们从这个角度来看共享经济，如果打车的成本足够低，车辆由谁拥有，并不影响最终的出行效率。但是。实际情况不是这样的，对私家车司机来说，做顺风车交易成本还是比较高的，比较典型的是等待成本和绕路成本，还有可能的安全成本，由于拉客带来的负面情绪成本等。&lt;/p&gt;
&lt;p&gt;先说下等待成本和绕路成本。目前滴滴司机端的推荐算法还只能做到基于附近位置的订单推荐，对于要上班的业余司机来说，这样是远远不够的，首先我不可能掉头去接后面的乘客，也不愿意绕路去接不怎么顺路的乘客，更不可能放着高速公路不走，走城市道路去接中途的乘客，这些事情都会导致上班迟到被罚钱，滴滴并没有给这些业余司机提供激励政策，而是对派单完成率进行考核和惩罚，对于职业专车司机，上面这些问题都不影响，因为他们不用担心上班迟到。并且，滴滴经常有连环奖励活动，早高峰联系完成5单以上，每单都有5元以上的额外奖励，这个奖励估计只有职业专车司机才能拿到。由于企业和个人追逐利润的动机，职业专车司机必然会把业余司机挤出市场，并影响到传统出租车司机的生意。最后留下的业余司机，可能已经不再是为了赚点油费做顺风车的普通司机，而是那些不为赚钱，有其他动机的司机，例如开着保时捷为了搭讪美女而做专车的司机，但各大公司门口拼车挖人的猎头司机等。这就出现了劣币驱逐良币的现象。&lt;/p&gt;
&lt;p&gt;当专车平台上出现了这些有其它动机的司机后，乘客的安全和隐私方面就会出现问题，最近经常爆出的专车司机性骚扰事件也证明了这一点。当然我们可以把责任推给不良司机，毕竟平台只是提供了出行信息，并且对车辆和司机身份进行了还算完善的线上认证，但这个约束是相对于传统出租车行业是非常脆弱的，一些居心不良的司机可以有一万种方法绕过平台的监管。&lt;/p&gt;
&lt;p&gt;从业余司机角度看，自己花钱买车主要是为了使用方便和面子，也就是出行的便利性和私密性。由于大量职业化专车司机的存在，必然会提高乘客对司机服务的期望。人性是自私的，在做过几次顺风车司机后尝鲜后，不太缺钱的业余司机很难再忍受一些挑剔的乘客，于是也就不再做顺风车了。很多人会说做顺风车是为了找人聊天，但拼车聊天实在是个弱需求，特别是在早高峰急着上班赶路的时候，司机在开车的时候聊天也会带来驾驶安全问题。&lt;/p&gt;
&lt;p&gt;上面分析了为什么职业司机会占据打车平台，业余司机会从逐渐从打车平台退出。下面看下专车司机职业化的带来的问题。首先是专车司机的进入门槛太低，导致司机鱼龙混杂，出现各种安全，监管和与传统出租车司机的利益冲突问题。出租车其实是个入门门槛挺低的行业，这年头谁不会开车啊。份子钱就是出租车司机上缴给出租车公司的承包费用，既是前者的主要运营成本，又是后者的主要收入来源。份子钱的存在就是为了提供这个行业的准入门槛，避免非法营运车辆对城市道路的多度占用，同时对出租车司机提供一些服务和管理。由于出租车司机承担了每月6千以上份子钱，而职业化专车司机并不承担份子钱，却同样进行营运，必然严重影响出租车司机的收入，导致出租车司机不满，各地不断出现出租车司机和专车司机的社会冲突。&lt;/p&gt;
&lt;p&gt;现在的问题是专车司机已经在事实上职业化了，但并没有真正职业化管理起来，打车平台对专车司机管理还停留在身份认证和平台规定约束层面，没有劳动协议，保证金，份子钱，准入培训等更加职业化的管理方法，导致很多问题出现。在职业化运营这点上，神州专车的重运营模式做的挺好，这应该是打车平台的未来发展趋势。&lt;/p&gt;
&lt;p&gt;总结一下，由于经济上的原因，专车司机会逐渐职业化，业余司机会逐渐被挤出市场，为了解决专车司机职业化带来的一系列问题，由此发展到职业化管理阶段，也就是类似神州专车的B2C重运营模式。在分享经济层面，出行平台解决的是出行信息的不对称性问题，重点是通过移动互联网更有效率地达成出行交易，而不是对车辆资源的分享。在更远的未来，随着大数据和人工智能的发展，自动驾驶技术发展成熟，专车将不再需要司机，实现智能化共享交通网络。目前特斯拉电动车的Autopilot自动驾驶技术已经初步可用了。&lt;/p&gt;
&lt;p&gt;参考文章&lt;br&gt;&lt;a href=&quot;http://36kr.com/p/5047748.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如果说“共享经济”是伪命题，那么“专车模式”怎样才靠谱？&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;作为一个懒散的业余顺风车司机，最近经常收到专车平台关于突发情况的短信提醒，听说南京出租车司机和专车司机最近有些冲突，原因当然是出租车司机认为专车司机抢了生意，而自己还需要承担每个月七千以上的份子钱，心里当然不爽了。但是，专车不是分享经济吗？只是顺路接单啊，怎么会对出租车的生意造成这么严重的影响呢？原因之一可能是大多数专车司机已经是职业化了，并且感觉司机平台的多单奖励制度也鼓励了专车的职业化行为，需要上班的顺风车肯定不可能在早高峰去接很多单啊，拼车等人，绕路都要花时间，上班迟到是要罚钱的，但职业司机就没有这个问题了。&lt;/p&gt;
&lt;p&gt;专车市场到底会怎样发展呢？我认为后面专车的车辆产权会由租车公司和出行平台共同拥有；专车司机会职业化，和平台签劳动协议，并经过专业化培训；专车会在交通部门的严格监管下运营；做专车司机的门槛将逐步提高，私家车司机将逐步推出专车行列。对于传统出租车行业来说，未来可能在某些城市被出行平台收编，当然中间肯定需要经过各方的利益博弈。&lt;/p&gt;
    
    </summary>
    
    
      <category term="分享经济" scheme="http://offbye.com/tags/%E5%88%86%E4%BA%AB%E7%BB%8F%E6%B5%8E/"/>
    
      <category term="专车" scheme="http://offbye.com/tags/%E4%B8%93%E8%BD%A6/"/>
    
  </entry>
  
  <entry>
    <title>读采铜的精进-如何成为一个很厉害的人有感</title>
    <link href="http://offbye.com/2016/06/09/%E8%AF%BB%E9%87%87%E9%93%9C%E7%9A%84%E7%B2%BE%E8%BF%9B-%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%BE%88%E5%8E%89%E5%AE%B3%E7%9A%84%E4%BA%BA%E6%9C%89%E6%84%9F/"/>
    <id>http://offbye.com/2016/06/09/读采铜的精进-如何成为一个很厉害的人有感/</id>
    <published>2016-06-09T14:22:49.000Z</published>
    <updated>2016-06-11T03:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;采铜的《精进-如何成为一个很厉害的人》确实是一本很好的书，我这个一般情况只在kindle上买书看书的人，在简书上看到这本书的介绍后，感觉非常不错，内容和观点比较适合我现在的状态，于是马上在亚马逊上下单买了一本。现在过去快2周了，大概看完一大半了，好书要慢慢读啊，先写篇读后感总结一下吧，免得后面忘记了。看书是一种输入，写出读书笔记是输出，要把时间放在输出型兴趣上，这是书中的一个观点。以后我每读完一本书都会写篇读书笔记，喜欢大家监督啊。&lt;br&gt;写读书笔记时才发现自己看书的一个严重问题，看完后不记得书的目录结构，只记得一些感兴趣的观点，很多没有共鸣的观点，因为没有掌握书的结构，以后肯定也不会有印象。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;在这本书中，作者采铜提出了一种更有效的提升自我的方法：用持续精确的努力，撬动更大的可能，这便是精进。&lt;br&gt;这本书为大家提供了时间、选择、行动、学习、思维、才能、成功七个方面的精进路径，只要依循书中的方法反复磨练，便可以日益精进，成为一个很厉害的人，找到实现自我的那条成功之道。&lt;br&gt;看上去挺美的啊，但是为什么厉害的人还是很少呢？ 其实道理非常简单，知道不等于能够做到。有了方法，真正达成目标还是需要持续地努力和付出。希望这本书能够让我们的努力更有效果。下面书的目录：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;目录  · · · · · ·&lt;br&gt;第一章    时间之尺&lt;br&gt;——我们应该怎样对待时间&lt;br&gt;一、    活在“全部的现在”&lt;br&gt;（从当下出发，联结过去与未来）&lt;br&gt;二、    对五年后的自己提问&lt;br&gt;（如何解决远期与近期未来的冲突？）&lt;br&gt;三、    我们总是在重复地抓起沙子&lt;br&gt;（把时间花在值得做的事情上）&lt;br&gt;四、    “快”与“慢”的自由切换&lt;br&gt;（为什么我们的时间永远不够用？）&lt;br&gt;第二章    寻找心中的“巴拿马”&lt;br&gt;——如何做出比好更好的选择&lt;br&gt;一、    从终极问题出发&lt;br&gt;（以人生终极目标作为首要原则）&lt;br&gt;二、    逃离隐含假设的牢笼&lt;br&gt;（发现人生中的更多可能选项）&lt;br&gt;三、    克服天性中的选择弱势&lt;br&gt;（选择太多怎么办？）&lt;br&gt;四、    人生是持续而反复的构造&lt;br&gt;（校正选择，做出建设性的改变）&lt;br&gt;第三章    即刻行动&lt;br&gt;——改变一切的核心力量&lt;br&gt;一、    “现在”就是恰当的时机&lt;br&gt;（不管怎样，只要开始就好）&lt;br&gt;二、    精益创业的行动启示&lt;br&gt;（把“未完成”变成“已完成” ）&lt;br&gt;三、    像Photoshop一样分解任务&lt;br&gt;（从工作的核心区开始）&lt;br&gt;四 、 三行而后思&lt;br&gt;（在实践中，通过复盘积累智慧）&lt;br&gt;第四章    怎样的学习，才能够直面现实？&lt;br&gt;——如何成为一个高段位的学习者？&lt;br&gt;一、    找到一切学习的向导&lt;br&gt;（好的学习者，首先要向自己提问）&lt;br&gt;二、    不要只做信息的搬运工&lt;br&gt;（通过解码，深入事物的深层）&lt;br&gt;三、    技能，才是学习的终点&lt;br&gt;（你能够调用的知识有多少？）&lt;br&gt;四、    分离的知识，难以解答真正的现实&lt;br&gt;（让不同的知识发生化学作用）&lt;br&gt;第五章    向未知的无限逼近&lt;br&gt;——修炼思维，成为真正的利器&lt;br&gt;一、    大脑需要“断舍离”&lt;br&gt;（ 简化，是清晰思考的前提 ）&lt;br&gt;二、    迎接“灵光乍现”的时刻&lt;br&gt;（让潜意识为你工作）&lt;br&gt;三、    思考可以有自己的形状&lt;br&gt;（将思维转化为图像 ）&lt;br&gt;四、    世界上没有轻而易举的答案&lt;br&gt;（只有极少数的人能做到周密思考）&lt;br&gt;第六章 努力，是一种需要学习的才能&lt;br&gt;——不断优化你的“努力”方式&lt;br&gt;一、    努力本身就是一种才能&lt;br&gt;（努力需要有效的策略）&lt;br&gt;二、    没有突出的长板就是危险&lt;br&gt;（专注发展自己的优势才能）&lt;br&gt;三、    你是“差不多先生”吗？&lt;br&gt;（绝不苟且，才能做到极致 ）&lt;br&gt;四、    挑战是设计出来的&lt;br&gt;（不断为自己设计“必要的难度”挑战 ）&lt;br&gt;五、    不痛苦地坚持到底&lt;br&gt;（只有深入下去，才能培养起真正的兴趣）&lt;br&gt;第七章 每一个成功者，都是唯一的&lt;br&gt;——创造成功，而不是复制成功&lt;br&gt;一、    “学渣”与“学霸”都不是好选择&lt;br&gt;（做一个主动探索的学习者）&lt;br&gt;二、    从“游乐场”到“荒野求生”&lt;br&gt;（怎样从大学走向社会？）&lt;br&gt;三、    独特性，就是你的核心竞争力&lt;br&gt;（ 请坚持你的与众不同！ ）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;第一章是时间之尺-我们应该怎样对待时间&quot;&gt;&lt;a href=&quot;#第一章是时间之尺-我们应该怎样对待时间&quot; class=&quot;headerlink&quot; title=&quot;第一章是时间之尺 我们应该怎样对待时间&quot;&gt;&lt;/a&gt;第一章是时间之尺 我们应该怎样对待时间&lt;/h2&gt;&lt;p&gt;一个人如何对待他的时间，决定了他可以成为什么样的人。首先讲了要活在当下，要专注做好当前的事情，不要过去追悔，为未来焦虑。这是我们应该有的人生态度，用曾国藩的话说就是“当读书，则读书，心无着于见客也；当见客，则见客，心无着于读书也。一有着，则私也。灵明无着，物来顺应，未来不迎，当时不杂，既过不恋。”&lt;/p&gt;
&lt;p&gt;向孩子学习“郑重“的态度，我有一个5岁的女儿，她每天晚上9点左右都画画，其实就是随便涂鸦了，但她真的是很专注，画画的时候从来不三心二意，被打扰了她会不开心，画完后你问她画了什么，她会很认真地讲给你听，尽管画看上去一点都不像。我发现很多大人在专注当下这方面还真的应该想孩子学习，总是自以外高效率，同时做几件事情。记起一个关于活在当下的小故事：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;一个小和尚问得道的师傅：“您得道前后有没有什么变化？”老和尚说：“变化很大。”那到底有什么变化呢，老和尚告诉小和尚：“在得道之前，我每天砍柴、挑水、做饭。得道之后，我每天砍柴、挑水、做饭。”小和尚不理解：“师傅，这不是一样吗？”老和尚说：“不一样，在得道之前，我每天砍柴的时候想着挑水，挑水的时候想着做饭，做饭的时候又想着砍柴。得道之后，我每天砍柴的时候只想着砍柴，挑水的时候只想着挑水，做饭的时候只想着做饭。”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;专注当下确实能让我在生活中保持平和的心态，保持客观的态度，不把自己的节奏弄乱。&lt;/p&gt;
&lt;p&gt;然后介绍了时间的视角： 积极过去视角，消极过去视角，享乐主义视角，宿命论视角和未来视角。我用这套方法检讨了一下自己，发现我这几年总是在消极过去视角和未来视角之间切换：有时会后悔自己错失了太多机会，导致情绪很低落；有时又一直想着未来的事情，对未来报太多希望，以至于影响到现在的状态。斯坦福大学心理学家津巴多的建议是不要维持单一的时间视角，我以后要注意采用享乐主义视角和积极过去视角调整状态。&lt;/p&gt;
&lt;p&gt;对五年后的自己提问，如何解决远期未来和近期未来的冲突？&lt;/p&gt;
&lt;p&gt;对于人生计划而言，五年确实是一个合适的时间，读完大学需要四年，多数工作从新手到熟手甚至专家五年时间也够了。在我从事的互联网行业，五年时间足够诞生一个互联网巨头公司了，也足够淘汰或兴起一种编程语言或技术平台。发现五年前的自己，确实没有想清楚五年后要做什么，对未来的期望太高了，这是应该是现在没有达到应有的高度的一个重要原因，所幸随着年龄的增长，对自己的认识越来越清楚了，五年后的人生状态也基本上有头绪了。&lt;br&gt;五年设想可以让我们用情景化，具象化的方式来构想远期未来，使未来鲜活生动起来，这样就有利于去实施。由于五年的时间跨度足够长，我们就不会把可行性，便利性作为主要判断依据，而是从长期价值出发。&lt;br&gt;解决远期未来和近期未来的冲突可以采用两个策略：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使远期未来的目标更加具体化、情境化和可实施&lt;/li&gt;
&lt;li&gt;降低近期未来中的“非期望行为“的便利性，主动增加挑战的难度&lt;br&gt;比如如果总是想玩游戏，就把游戏删除掉，虽然你后面还会下载回来玩，但由于玩游戏的成本提高了，玩的次数是能够显著减少的。我在大学里曾经这样做过，记得当时为了考研，反复删除了很多次魔兽冰封王座游戏，还是很有效果的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们总是在重复地抓起沙子，把时间花在值得做的事情上。&lt;br&gt;什么是值得做的事情？作者提供了2个角度：一个是当下给我带来的收益大小，二是收益随时间衰减的程度，作者称为“收益半衰期“。收益半衰期是让我的印象深刻的一个词。要多做收益半衰期长的事情，而不要太在意当前收益的大小。对我来说，写技术博客，写文章，参加开源项目，做技术演讲这些事情的收益半衰期都是比较长的，要坚持去做好。&lt;br&gt;作者给出一个长半衰期事件指南。收益半衰期是一个有效的思维工具，就像一把时间之尺，可以丈量出有长远价值的事物。&lt;br&gt;第一章最后作者提到了为什么要多读经典和互联网时代的信息碎片化问题，用时间之尺的方法，可以有效的过滤掉噪音信息。&lt;/p&gt;
&lt;h2 id=&quot;第二章-寻找心中的“巴拿马“-如何做出比好更好的选择&quot;&gt;&lt;a href=&quot;#第二章-寻找心中的“巴拿马“-如何做出比好更好的选择&quot; class=&quot;headerlink&quot; title=&quot;第二章 寻找心中的“巴拿马“ 如何做出比好更好的选择&quot;&gt;&lt;/a&gt;第二章 寻找心中的“巴拿马“ 如何做出比好更好的选择&lt;/h2&gt;&lt;p&gt;[本文独立博客地址](）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;采铜的《精进-如何成为一个很厉害的人》确实是一本很好的书，我这个一般情况只在kindle上买书看书的人，在简书上看到这本书的介绍后，感觉非常不错，内容和观点比较适合我现在的状态，于是马上在亚马逊上下单买了一本。现在过去快2周了，大概看完一大半了，好书要慢慢读啊，先写篇读后感总结一下吧，免得后面忘记了。看书是一种输入，写出读书笔记是输出，要把时间放在输出型兴趣上，这是书中的一个观点。以后我每读完一本书都会写篇读书笔记，喜欢大家监督啊。&lt;br&gt;写读书笔记时才发现自己看书的一个严重问题，看完后不记得书的目录结构，只记得一些感兴趣的观点，很多没有共鸣的观点，因为没有掌握书的结构，以后肯定也不会有印象。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Facebook F8App-ReactNative项目源码分析5-iOS篇</title>
    <link href="http://offbye.com/2016/06/08/Facebook-F8App-ReactNative%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%905-iOS%E7%AF%87/"/>
    <id>http://offbye.com/2016/06/08/Facebook-F8App-ReactNative项目源码分析5-iOS篇/</id>
    <published>2016-06-08T13:07:46.000Z</published>
    <updated>2016-06-08T06:56:55.000Z</updated>
    
    <content type="html">&lt;p&gt;近期开始研究Facebook f8app项目，目标是理解Facebook官方React Native f8app的整体技术架构，给公司目前几个的React Native项目开发提供官方经验借鉴，并对原生开发和React Native开发进行框架层面的融合。&lt;br&gt;本文分析f8app iOS代码的结构和技术实现，阅读本文的前提是对React Native和iOS开发有一定的了解。&lt;br&gt;f8app ios项目使用了CocosPod管理模块，现在RN的最新版本创建的项目默认已经不再使用CocosPods了,直接通过工程引用。f8app还是用了CocosPod，因此我们首先需要在ios目录下运行&lt;code&gt;pod install&lt;/code&gt;，安装好依赖的项目，然后用Xcode打开F8v2.xcworkspace工作空间，注意不是打开F8v2.xcodeproj工程文件，我经常犯这个错误，实在不喜欢用CocosPods啊。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;iOS-f8app效果展示&quot;&gt;&lt;a href=&quot;#iOS-f8app效果展示&quot; class=&quot;headerlink&quot; title=&quot;iOS f8app效果展示&quot;&gt;&lt;/a&gt;iOS f8app效果展示&lt;/h2&gt;&lt;p&gt;先看下效果吧，在iOS模拟器上动效还是很好的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/f8a.gif&quot; alt=&quot;f8appiOS&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;ios工程结构&quot;&gt;&lt;a href=&quot;#ios工程结构&quot; class=&quot;headerlink&quot; title=&quot;ios工程结构&quot;&gt;&lt;/a&gt;ios工程结构&lt;/h2&gt;&lt;p&gt;首先还是先看下ios工程的结构：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── Default-568h@2x.png&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8Scrolling.h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8Scrolling.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8v2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── AppDelegate.h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── AppDelegate.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Base.lproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── LaunchScreen.xib&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Images.xcassets&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── AppIcon.appiconset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── AppIcon@2x.png&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── AppIcon@3x.png&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── Contents.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── Contents.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Info.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── main.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8v2.xcodeproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8v2.xcworkspace&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── F8v2Tests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── Info.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── PodFile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── Podfile.lock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── Pods&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Bolts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── Bolts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── Common&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── iOS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── README.md&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── README.mdown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── README.mdown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── LICENSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── README.mdown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Headers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── Private&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── Bolts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── CodePush&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── React&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── react-native-fbsdkcore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   ├── react-native-fbsdklogin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── react-native-fbsdkshare&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── Public&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── Bolts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── CodePush&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── React&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── react-native-fbsdkcore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       ├── react-native-fbsdklogin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │       └── react-native-fbsdkshare&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Local\ Podspecs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── CodePush.podspec.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── React.podspec.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── react-native-fbsdkcore.podspec.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── react-native-fbsdklogin.podspec.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   └── react-native-fbsdkshare.podspec.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Manifest.lock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Pods.xcodeproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── project.pbxproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   ├── xcshareddata&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   │   │   └── xcschemes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── Target\ Support\ Files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── Bolts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Bolts-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Bolts-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── Bolts.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── CodePush&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── CodePush-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── CodePush-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── CodePush.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── FBSDKCoreKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKCoreKit-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKCoreKit-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── FBSDKCoreKit.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── FBSDKLoginKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKLoginKit-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKLoginKit-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── FBSDKLoginKit.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── FBSDKShareKit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKShareKit-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── FBSDKShareKit-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── FBSDKShareKit.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── Pods-F8v2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2-acknowledgements.markdown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2-acknowledgements.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2-frameworks.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2-resources.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── Pods-F8v2.debug.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── Pods-F8v2.release.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── React&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── React-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── React-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── React.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── react-native-fbsdkcore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── react-native-fbsdkcore-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── react-native-fbsdkcore-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── react-native-fbsdkcore.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       ├── react-native-fbsdklogin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── react-native-fbsdklogin-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   ├── react-native-fbsdklogin-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       │   └── react-native-fbsdklogin.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       └── react-native-fbsdkshare&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│           ├── react-native-fbsdkshare-dummy.m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│           ├── react-native-fbsdkshare-prefix.pch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│           └── react-native-fbsdkshare.xcconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── Settings.bundle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── About.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   ├── Root.plist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│   └── en.lproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;│       └── Root.strings&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── Splash@2x.png&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;└── build&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;PodFile文件分析&quot;&gt;&lt;a href=&quot;#PodFile文件分析&quot; class=&quot;headerlink&quot; title=&quot;PodFile文件分析&quot;&gt;&lt;/a&gt;PodFile文件分析&lt;/h2&gt;&lt;p&gt;PodFile是CocosPod的配置文件，是ruby语言写的，定义了用到的第三方模块，和一些处理过程。&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;source &lt;span class=&quot;string&quot;&gt;&#39;https://github.com/CocoaPods/Specs.git&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target &lt;span class=&quot;string&quot;&gt;&#39;F8v2&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pod &lt;span class=&quot;string&quot;&gt;&#39;React&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:subspecs&lt;/span&gt; =&amp;gt; [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;Core&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTActionSheet&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTImage&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTNetwork&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTText&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTWebSocket&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTPushNotification&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTLinkingIOS&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;RCTVibration&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ], &lt;span class=&quot;symbol&quot;&gt;:path&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;../node_modules/react-native&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pod &lt;span class=&quot;string&quot;&gt;&#39;react-native-fbsdkcore&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:path&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;../node_modules/react-native-fbsdk/iOS/core&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pod &lt;span class=&quot;string&quot;&gt;&#39;react-native-fbsdklogin&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:path&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;../node_modules/react-native-fbsdk/iOS/login&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pod &lt;span class=&quot;string&quot;&gt;&#39;react-native-fbsdkshare&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:path&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;../node_modules/react-native-fbsdk/iOS/share&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pod &lt;span class=&quot;string&quot;&gt;&#39;CodePush&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:path&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&#39;../node_modules/react-native-code-push&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Start the React Native JS packager server when running the project in Xcode.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;start_packager = &lt;span class=&quot;string&quot;&gt;%q(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if nc -w 5 -z localhost 8081 ; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if ! curl -s &quot;http://localhost:8081/status&quot; | grep -q &quot;packager-status:running&quot; ; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &quot;Port 8081 already in use, packager is either not running or not running correctly&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    exit 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  open $SRCROOT/../../node_modules/react-native/packager/launchPackager.command || echo &quot;Can&#39;t start packager automatically&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;post_install &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;|installer|&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  target = installer.pods_project.targets.select&amp;#123;&lt;span class=&quot;params&quot;&gt;|t|&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;React&#39;&lt;/span&gt; == t.name&amp;#125;.first&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  phase = target.new_shell_script_build_phase(&lt;span class=&quot;string&quot;&gt;&#39;Run Script&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  phase.shell_script = start_packager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;通过CocosPod引入了React，react-native-fbsdkcore，react-native-fbsdklogin，react-native-fbsdkshare，CodePush这些模块，&lt;br&gt;最后会尝试启动React Native packager。&lt;/p&gt;
&lt;h2 id=&quot;入口类AppDelegate-m代码分析&quot;&gt;&lt;a href=&quot;#入口类AppDelegate-m代码分析&quot; class=&quot;headerlink&quot; title=&quot;入口类AppDelegate.m代码分析&quot;&gt;&lt;/a&gt;入口类AppDelegate.m代码分析&lt;/h2&gt;&lt;p&gt;从项目的入口类AppDelegate.m看起,&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;lt;FBSDKCoreKit/FBSDKCoreKit.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;lt;CodePush/CodePush.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;AppDelegate.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;RCTRootView.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;RCTPushNotificationManager.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@implementation AppDelegate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSURL *jsCodeLocation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef DEBUG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSString *ip = [[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@&amp;quot;ip&amp;quot; ofType:@&amp;quot;txt&amp;quot;] encoding:NSUTF8StringEncoding error:nil] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@&amp;quot;\n&amp;quot;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (!ip) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ip = @&amp;quot;127.0.0.1&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  jsCodeLocation = [NSURL URLWithString:[NSString stringWithFormat:@&amp;quot;http://%@:8081/index.ios.bundle?platform=ios&amp;amp;dev=true&amp;quot;, ip]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  jsCodeLocation = [CodePush bundleURL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSLog(jsCodeLocation.absoluteString);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                      moduleName:@&amp;quot;F8v2&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                               initialProperties:nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                   launchOptions:launchOptions];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@&amp;quot;LaunchScreen&amp;quot; owner:self options:nil];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIImageView *loadingView = [[[objects objectAtIndex:0] subviews] objectAtIndex:0];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  loadingView = [[UIImageView alloc] initWithImage:[loadingView image]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  loadingView.frame = [UIScreen mainScreen].bounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  rootView.loadingView = loadingView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIViewController *rootViewController = [[UIViewController alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  rootViewController.view = rootView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  self.window.rootViewController = rootViewController;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [[UIApplication sharedApplication] setStatusBarHidden:NO];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [self.window makeKeyAndVisible];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return YES;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)applicationDidBecomeActive:(UIApplication *)application &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [FBSDKAppEvents activateApp];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return [[FBSDKApplicationDelegate sharedInstance] application:application&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                        openURL:url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              sourceApplication:sourceApplication&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                     annotation:annotation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [RCTPushNotificationManager didRegisterUserNotificationSettings:notificationSettings];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [RCTPushNotificationManager didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)notification&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [RCTPushNotificationManager didReceiveRemoteNotification:notification];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到主要用了FBSDKCoreKit，CodePush热更新，RCTPushNotificationManager推送。&lt;br&gt;首先创建了RCTRootView &lt;em&gt;rootView，RCTRootView就是RN页面的容器，我们只要在iOS ViewController中添加RCTRootView就可以展示RN的页面了。&lt;br&gt;然后从LaunchScreen.xib中取出一个子View作为rootView的加载页面loadingView，设置view的frame，创建一个rootViewController，并把它的view设置成RCTRootView &lt;/em&gt;rootView，然后把UIWindow的rootViewController设成刚才创建的rootViewController，这些代码还是很简单的。&lt;br&gt;didRegisterUserNotificationSettings，didRegisterForRemoteNotificationsWithDeviceToken，didReceiveRemoteNotification几个方法是对推送通知的处理，也比较简单。&lt;/p&gt;
&lt;h2 id=&quot;F8Scrolling-m滚动UI组件代码分析&quot;&gt;&lt;a href=&quot;#F8Scrolling-m滚动UI组件代码分析&quot; class=&quot;headerlink&quot; title=&quot;F8Scrolling.m滚动UI组件代码分析&quot;&gt;&lt;/a&gt;F8Scrolling.m滚动UI组件代码分析&lt;/h2&gt;&lt;p&gt;然后看下F8Scrolling.m，这个是RN的滚动UI组件，在f8app/js/common/ListContainer.js中用到了这个组件的js代码。我们看看代码里做了哪些事情：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;lt;UIKit/UIKit.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;lt;CoreGraphics/CoreGraphics.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;F8Scrolling.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;RCTUIManager.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;quot;RCTScrollView.h&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@interface F8Scrolling () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSMapTable *_pinnedViews;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  NSMapTable *_distances;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@implementation F8Scrolling&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@synthesize bridge = _bridge;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RCT_EXPORT_MODULE()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (instancetype)init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (self = [super init]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _pinnedViews = [[NSMapTable alloc] initWithKeyOptions:NSMapTableWeakMemory valueOptions:NSMapTableWeakMemory capacity:20];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _distances = [[NSMapTable alloc] initWithKeyOptions:NSMapTableWeakMemory valueOptions:NSMapTableStrongMemory capacity:20];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return self;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (dispatch_queue_t)methodQueue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return dispatch_get_main_queue();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RCT_EXPORT_METHOD(pin:(nonnull NSNumber *)scrollViewReactTag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  toView:(nonnull NSNumber *)pinnedViewReactTag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  withDistance:(nonnull NSNumber *)distance)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIView *pinnedView = [self.bridge.uiManager viewForReactTag:pinnedViewReactTag];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIView *scrollView = [self.bridge.uiManager viewForReactTag:scrollViewReactTag];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if ([scrollView isKindOfClass:[RCTScrollView class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RCTScrollView *reactScrollView = (RCTScrollView *)scrollView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [_pinnedViews setObject:pinnedView forKey:reactScrollView.scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [_distances setObject:distance forKey:reactScrollView.scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [reactScrollView setNativeScrollDelegate:self];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [self scrollViewDidScroll:reactScrollView.scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RCT_EXPORT_METHOD(unpin:(nonnull NSNumber *)scrollViewReactTag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIView *scrollView = [self.bridge.uiManager viewForReactTag:scrollViewReactTag];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if ([scrollView isKindOfClass:[RCTScrollView class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RCTScrollView *reactScrollView = (RCTScrollView *)scrollView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [_pinnedViews removeObjectForKey:reactScrollView.scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [_distances removeObjectForKey:reactScrollView.scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [reactScrollView setNativeScrollDelegate:nil];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)scrollViewDidScroll:(UIScrollView *)scrollView&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UIView *pinnedView = [_pinnedViews objectForKey:scrollView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (!pinnedView) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  CGFloat distance = [[_distances objectForKey:scrollView] doubleValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  CGFloat y = MAX(0, distance - scrollView.contentOffset.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pinnedView.transform = CGAffineTransformMakeTranslation(0, y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;首先是类定义，oc里面是用@interface定义类的，这个和Java的interface很不一样，protocol对应Java的接口interface。&lt;br&gt;&lt;code&gt;@interface F8Scrolling : NSObject &amp;lt;RCTBridgeModule, UIScrollViewDelegate&amp;gt;&lt;/code&gt;&lt;br&gt;init构造函数初始化了_pinnedViews和_distances2个变量，都是NSMapTable类型，&lt;a href=&quot;http://www.isaced.com/post-235.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSMapTable&lt;/a&gt;（顾名思义）更适合于一般意义的映射。这取决于它是如何构造的，NSMapTable可以处理的“key-to-object”样式映射的NSDictionary，但它也可以处理“object-to-object”的映射 - 也被称为“associative array”或简称为“map”。_pinnedViews的key和value都是weak引用，_distances的key是weak引用，value是强引用。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;@synthesize bridge=_bridge;&lt;/code&gt;意思是说，bridge 属性为 _bridge 实例变量合成访问器方法。&lt;br&gt;也就是说，bridge属性生成存取方法是setBridge，这个setWindow方法就是_bridge变量的存取方法，它操作的就是_bridge这个变量。通过这个看似是赋值的这样一个操作，我们可以在@synthesize 中定义与变量名不相同的getter和setter的命名，籍此来保护变量不会被不恰当的访问。&lt;/p&gt;
&lt;p&gt;methodQueue返回了main_queue,规定这个组件运行在UI线程，因为它是UI组件啊&lt;br&gt;然后是几个方法的定义，RCT_EXPORT_METHOD宏提供导出方法到js的能力，可以用RCT_REMAP_METHOD重新定义在js中的函数名，还可以让js方法异步返回Promise，下面是它的定义&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Wrap the parameter line of your method implementation with this macro to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * expose it to JS. By default the exposed method will match the first part of&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * the Objective-C method selector name (up to the first colon). Use&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * RCT_REMAP_METHOD to specify the JS name of the method.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * For example, in ModuleName.m:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * - (void)doSomething:(NSString *)aString withA:(NSInteger)a andB:(NSInteger)b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * &amp;#123; ... &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * becomes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * RCT_EXPORT_METHOD(doSomething:(NSString *)aString&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *                   withA:(NSInteger)a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *                   andB:(NSInteger)b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * &amp;#123; ... &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * and is exposed to JavaScript as `NativeModules.ModuleName.doSomething`.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * ## Promises&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Bridge modules can also define methods that are exported to JavaScript as&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * methods that return a Promise, and are compatible with JS async functions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Declare the last two parameters of your native method to be a resolver block&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * and a rejecter block. The resolver block must precede the rejecter block.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * For example:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * RCT_EXPORT_METHOD(doSomethingAsync:(NSString *)aString&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *                           resolver:(RCTPromiseResolveBlock)resolve&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *                           rejecter:(RCTPromiseRejectBlock)reject&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * &amp;#123; ... &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Calling `NativeModules.ModuleName.doSomethingAsync(aString)` from&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * JavaScript will return a promise that is resolved or rejected when your&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * native method implementation calls the respective block.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define RCT_EXPORT_METHOD(method) \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  RCT_REMAP_METHOD(, method)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;方法pin从名字就可以知道，功能是固定view的。通过self.bridge.uiManager viewForReactTag方法获取到view。&lt;br&gt;方法scrollViewDidScroll最后定义了pinnedView的transform动画效果,&lt;code&gt;pinnedView.transform = CGAffineTransformMakeTranslation(0, y);&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;F8v2目录下的代码文件基本上就介绍完了，Info.plist文件定义了项目的一些基本属性，包括CodePush key等的自定义属性。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;f8app iOS的代码量还是比较少的，本文主要分析了AppDelegate.m和 F8Scrolling UI组件的代码。项目还用了BVLinearGradient渐变UI组件，通过工程引用的，代码也比较简单。另外还通过CocosPod引入了React，react-native-fbsdkcore，react-native-fbsdklogin，react-native-fbsdkshare，CodePush这些模块，可以参考ios/PodFile。&lt;/p&gt;
&lt;p&gt;[本文独立博客地址](&lt;a href=&quot;http://www.offbye.com）&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.offbye.com）&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;近期开始研究Facebook f8app项目，目标是理解Facebook官方React Native f8app的整体技术架构，给公司目前几个的React Native项目开发提供官方经验借鉴，并对原生开发和React Native开发进行框架层面的融合。&lt;br&gt;本文分析f8app iOS代码的结构和技术实现，阅读本文的前提是对React Native和iOS开发有一定的了解。&lt;br&gt;f8app ios项目使用了CocosPod管理模块，现在RN的最新版本创建的项目默认已经不再使用CocosPods了,直接通过工程引用。f8app还是用了CocosPod，因此我们首先需要在ios目录下运行&lt;code&gt;pod install&lt;/code&gt;，安装好依赖的项目，然后用Xcode打开F8v2.xcworkspace工作空间，注意不是打开F8v2.xcodeproj工程文件，我经常犯这个错误，实在不喜欢用CocosPods啊。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Swift iOS中的Nullability Annotations</title>
    <link href="http://offbye.com/2016/06/02/Swift-iOS%E4%B8%AD%E7%9A%84Nullability-Annotations/"/>
    <id>http://offbye.com/2016/06/02/Swift-iOS中的Nullability-Annotations/</id>
    <published>2016-06-02T06:41:30.000Z</published>
    <updated>2016-06-02T07:49:52.000Z</updated>
    
    <content type="html">&lt;p&gt;今天折腾使用swift开发React Native的插件，遇到一个参数必须标记成nonnull的问题。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;用Swift写了个RN简单的模块，遇到了下面的错误：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[error][tid:com.facebook.react.CalendarManagerQueue][RCTModuleMethod.m:58] Argument 2 (NSNumber) of CalendarManager.addEvent has unspecified nullability but React requires that all NSNumber arguments are explicitly marked as `nonnull` to ensure compatibility with Android.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;解决这个错误，只需要在参数前面加上nonnull就可以了，但是为什么呢？&lt;/p&gt;
&lt;p&gt;于是google了一下，发现这是Xcode 6.3的一个新特性，即nullability annotations。&lt;/p&gt;
&lt;h2 id=&quot;Nullability-Annotations&quot;&gt;&lt;a href=&quot;#Nullability-Annotations&quot; class=&quot;headerlink&quot; title=&quot;Nullability Annotations&quot;&gt;&lt;/a&gt;Nullability Annotations&lt;/h2&gt;&lt;p&gt;我们都知道在swift中，可以使用!和?来表示一个对象是optional的还是non-optional，如view?和view!。而在Objective-C中则没有这一区分，view即可表示这个对象是optional，也可表示是non-optional。这样就会造成一个问题：在Swift与Objective-C混编时，Swift编译器并不知道一个Objective-C对象到底是optional还是non-optional，因此这种情况下编译器会隐式地将Objective-C的对象当成是non-optional。&lt;/p&gt;
&lt;p&gt;为了解决这个问题，苹果在Xcode 6.3引入了一个Objective-C的新特性：nullability annotations。这一新特性的核心是两个新的类型注释：&lt;strong&gt;nullable和&lt;/strong&gt;nonnull。从字面上我们可以猜到，&lt;strong&gt;nullable表示对象可以是NULL或nil，而&lt;/strong&gt;nonnull表示对象不应该为空。当我们不遵循这一规则时，编译器就会给出警告。&lt;/p&gt;
&lt;p&gt;我们来看看以下的实例，&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@interface TestNullabilityClass ()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@property (nonatomic, copy) NSArray * items;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (id)itemWithName:(NSString * __nonnull)name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@implementation TestNullabilityClass&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)testNullability &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [self itemWithName:nil];    // 编译器警告：Null passed to a callee that requires a non-null argument&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (id)itemWithName:(NSString * __nonnull)name &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;不过这只是一个警告，程序还是能编译通过并运行。&lt;/p&gt;
&lt;p&gt;事实上，在任何可以使用const关键字的地方都可以使用&lt;strong&gt;nullable和&lt;/strong&gt;nonnull，不过这两个关键字仅限于使用在指针类型上。而在方法的声明中，我们还可以使用不带下划线的nullable和nonnull，如下所示&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(nullable id)itemWithName:(NSString * nonnull)name&lt;br&gt;在属性声明中，也增加了两个相应的特性，因此上例中的items属性可以如下声明：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;@property (nonatomic, copy, nonnull) NSArray * items;&lt;br&gt;当然也可以用以下这种方式：&lt;/p&gt;
&lt;p&gt;@property (nonatomic, copy) NSArray * __nonnull items;&lt;br&gt;推荐使用nonnull这种方式，这样可以让属性声明看起来更清晰。&lt;/p&gt;
&lt;p&gt;Nonnull区域设置(Audited Regions)&lt;/p&gt;
&lt;p&gt;如果需要每个属性或每个方法都去指定nonnull和nullable，是一件非常繁琐的事。苹果为了减轻我们的工作量，专门提供了两个宏：NS_ASSUME_NONNULL_BEGIN和NS_ASSUME_NONNULL_END。在这两个宏之间的代码，所有简单指针对象都被假定为nonnull，因此我们只需要去指定那些nullable的指针。如下代码所示：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;NS_ASSUME_NONNULL_BEGIN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@interface TestNullabilityClass ()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@property (nonatomic, copy) NSArray * items;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (id)itemWithName:(nullable NSString *)name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NS_ASSUME_NONNULL_END&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在上面的代码中，items属性默认是nonnull的，itemWithName:方法的返回值也是nonnull，而参数是指定为nullable的。&lt;/p&gt;
&lt;p&gt;不过，为了安全起见，苹果还制定了几条规则：&lt;/p&gt;
&lt;p&gt;typedef定义的类型的nullability特性通常依赖于上下文，即使是在Audited Regions中，也不能假定它为nonnull。&lt;br&gt;复杂的指针类型(如id &lt;em&gt;)必须显示去指定是nonnull还是nullable。例如，指定一个指向nullable对象的nonnull指针，可以使用”__nullable id &lt;/em&gt; __nonnull”。&lt;br&gt;我们经常使用的NSError **通常是被假定为一个指向nullable NSError对象的nullable指针。&lt;br&gt;兼容性&lt;/p&gt;
&lt;p&gt;因为Nullability Annotations是Xcode 6.3新加入的，所以我们需要考虑之前的老代码。实际上，苹果已以帮我们处理好了这种兼容问题，我们可以安全地使用它们：&lt;/p&gt;
&lt;p&gt;老代码仍然能正常工作，即使对nonnull对象使用了nil也没有问题。&lt;br&gt;老代码在需要和swift混编时，在新的swift编译器下会给出一个警告。&lt;br&gt;nonnull不会影响性能。事实上，我们仍然可以在运行时去判断我们的对象是否为nil。&lt;br&gt;事实上，我们可以将nonnull/nullable与我们的断言和异常一起看待，其需要处理的问题都是同一个：违反约定是一个程序员的错误。特别是，返回值是我们可控的东西，如果返回值是nonnull的，则我们不应该返回nil，除非是为了向后兼容。&lt;/p&gt;
&lt;h3 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/swift/blog/?id=25&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nullability and Objective-C&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[本文独立博客地址](）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天折腾使用swift开发React Native的插件，遇到一个参数必须标记成nonnull的问题。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>React Native Package Manager包管理器介绍</title>
    <link href="http://offbye.com/2016/06/01/React-Native-Package-Manager%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E4%BB%8B%E7%BB%8D/"/>
    <id>http://offbye.com/2016/06/01/React-Native-Package-Manager包管理器介绍/</id>
    <published>2016-06-01T01:59:06.000Z</published>
    <updated>2016-06-01T15:20:22.000Z</updated>
    
    <content type="html">&lt;p&gt;React Native Package Manager是为了简化React Native开发而生的包管理器。这个项目的想法来自CocoaPods, fastlane和react-native link。它的目标是让几乎全部可用的模块不需要额外配置就可以使用。&lt;br&gt;RNPM需要一直在版本控制系统的管理下使用，以便保证一切可以回退。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;相关网站&quot;&gt;&lt;a href=&quot;#相关网站&quot; class=&quot;headerlink&quot; title=&quot;相关网站&quot;&gt;&lt;/a&gt;相关网站&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.reactnative.com/react-native-package-manager/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RNPM官方网站&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/rnpm/rnpm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rnpm github&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://js.coach/react-native&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RN组件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;需要node4.0以上版本，基本安装和使用方法如下：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Installation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm install rnpm -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Usage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm install react-native-&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt; --&lt;span class=&quot;title&quot;&gt;save&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rnpm link react-native-&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;module&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下面我们看看实际如下使用rnpm吧，首先你要一个React Native项目啊，&lt;br&gt;没有就新建一个吧,&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;react-native init zxtRn&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后到&lt;a href=&quot;https://js.coach/react-native/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://js.coach/react-native/&lt;/a&gt; 找需要的模块，以&lt;code&gt;react-native-send-intent&lt;/code&gt; 为例吧。&lt;br&gt;&lt;a href=&quot;https://github.com/lucasferreira/react-native-send-intent&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;react-native-send-intent&lt;/a&gt;模块提供在RN js代码中调用Android Intent发送短信，打电话的能力。&lt;br&gt;有了rnpm我们就不需要通过模块github的说明一步一步配置了，只需要用下面的命令安装就行了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ rnpm install react-native-send-intent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;react-native-send-intent@1.0.10 node_modules/react-native-send-intent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rnpm-link info Linking react-native-send-intent android dependency&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rnpm-link info Android module react-native-send-intent has been successfully linked&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rnpm-install info Module react-native-send-intent has been successfully installed &amp;amp; linked&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git diff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/android/app/build.gradle b/android/app/build.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 2c01c61..69506c5 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/android/app/build.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/android/app/build.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -121,6 +121,7 @@ android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; dependencies &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    compile project(&amp;apos;:react-native-send-intent&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     compile project(&amp;apos;:react-native-code-push&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     compile fileTree(dir: &amp;quot;libs&amp;quot;, include: [&amp;quot;*.jar&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     // From node_modules&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/android/app/src/main/java/com/zxtrn/MainActivity.java b/android/app/src/main/java/com/zxtrn/MainActivity.java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index b8eecad..7e09daf 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/android/app/src/main/java/com/zxtrn/MainActivity.java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/android/app/src/main/java/com/zxtrn/MainActivity.java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,6 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; package com.zxtrn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; import com.facebook.react.ReactActivity;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+import com.burnweb.rnsendintent.RNSendIntentPackage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; import com.microsoft.codepush.react.CodePush;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; import com.facebook.react.ReactPackage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; import com.facebook.react.shell.MainReactPackage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -45,6 +46,7 @@ public class MainActivity extends ReactActivity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         return Arrays.&amp;lt;ReactPackage&amp;gt;asList(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             new MainReactPackage(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+            new RNSendIntentPackage(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             this._codePush&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             //new CodePush(this.getResources().getString(R.strings.reactNativeCodePush_androidDeploymentKey), this, BuildConfig.DEBUG)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/android/app/src/main/res/values/strings.xml b/android/app/src/main/res/values/strings.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 6252fd9..7b5819b 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/android/app/src/main/res/values/strings.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/android/app/src/main/res/values/strings.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,4 +1,5 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;resources&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;lt;string name=&amp;quot;reactNativeCodePush_androidDeploymentKey&amp;quot; moduleConfig=&amp;quot;true&amp;quot;&amp;gt;UAvQtR1CTph9a9b4axtv3rupnJigVklbZAwzW&amp;lt;/string&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;lt;string name=&amp;quot;app_name&amp;quot;&amp;gt;zxtRn&amp;lt;/string&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;lt;string name=&amp;quot;title_activity_my&amp;quot;&amp;gt;MyActivity&amp;lt;/string&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/android/settings.gradle b/android/settings.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 19d1a10..ec167d0 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/android/settings.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/android/settings.gradle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -1,5 +1,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; rootProject.name = &amp;apos;zxtRn&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; include &amp;apos;:app&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+include &amp;apos;:react-native-send-intent&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+project(&amp;apos;:react-native-send-intent&amp;apos;).projectDir = new File(rootProject.projectDir, &amp;apos;../node_modules/react-native-send-intent/android&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; include &amp;apos;:react-native-code-push&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; project(&amp;apos;:react-native-code-push&amp;apos;).projectDir = new File(rootProject.projectDir, &amp;apos;../node_modules/react-native-code-push/android/app&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;diff --git a/package.json b/package.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index 8fd73cc..f7aa8c5 100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--- a/package.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+++ b/package.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@@ -8,6 +8,7 @@&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;quot;dependencies&amp;quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;quot;react&amp;quot;: &amp;quot;^15.0.2&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;quot;react-native&amp;quot;: &amp;quot;^0.26.0&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-    &amp;quot;react-native-code-push&amp;quot;: &amp;quot;^1.11.0-beta&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    &amp;quot;react-native-code-push&amp;quot;: &amp;quot;^1.11.0-beta&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    &amp;quot;react-native-send-intent&amp;quot;: &amp;quot;^1.0.10&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(END)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;用git diff可以看到修改的文件，如果熟悉gradle和Android就很容易理解发生了什么，就是增加了一个工程依赖，并增加了插件包RNSendIntentPackage，依赖的工程是../node_modules/react-native-send-intent/android，&lt;br&gt;CodePush也可以用rnpm直接安装啊，我的项目上次已经配置好了CodePush。&lt;/p&gt;
&lt;p&gt;通过rnpm可以方便的管理RN的第三方模块，不需要做那些繁琐的配置了。&lt;br&gt;￼&lt;br&gt;￼￼&lt;br&gt;￼&lt;br&gt;[本文独立博客地址](）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;React Native Package Manager是为了简化React Native开发而生的包管理器。这个项目的想法来自CocoaPods, fastlane和react-native link。它的目标是让几乎全部可用的模块不需要额外配置就可以使用。&lt;br&gt;RNPM需要一直在版本控制系统的管理下使用，以便保证一切可以回退。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>升级CocoaPods 1.0.0问题解决汇总</title>
    <link href="http://offbye.com/2016/05/29/%E5%8D%87%E7%BA%A7CocoaPods-1-0-0%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%B1%87%E6%80%BB/"/>
    <id>http://offbye.com/2016/05/29/升级CocoaPods-1-0-0问题解决汇总/</id>
    <published>2016-05-29T13:51:28.000Z</published>
    <updated>2016-05-30T01:41:56.000Z</updated>
    
    <content type="html">&lt;p&gt;昨天晚上升级了CocosPads1.0, 只是安装成功了，现在项目里面运行pod install又发现了几个问题，昨天折腾的太晚了。今天继续折腾吧。&lt;br&gt;今天终于彻底搞定了CocosPods1.0，包括安装，运行和一个开源项目PodFile的1.0升级。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;运行&lt;code&gt;pod install&lt;/code&gt;时发现CocoaPods 提示有1.0版本了，于是打算升级一下。&lt;br&gt;CocoaPods 1.0.0 is available.&lt;br&gt;To update use: &lt;code&gt;gem install cocoapods&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;结果就出现了下面的错误，分析了下原因是/usr/bin/xcodeproj目录路径错了，网上搜了下解决问题，使用&lt;code&gt;sudo gem install -n /usr/local/bin cocoapods --pre&lt;/code&gt; 命令顺利安装成功。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo gem install cocoapods&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR:  While executing gem ... (Errno::EPERM)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Operation not permitted - /usr/bin/xcodeproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -al /usr/bin/xcodeproj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls: cannot access /usr/bin/xcodeproj: No such file or directory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo gem install -n /usr/local/bin cocoapods --pre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Successfully installed xcodeproj-1.0.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fetching: molinillo-0.4.5.gem (100%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Successfully installed molinillo-0.4.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fetching: cocoapods-try-1.0.0.gem (100%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Successfully installed cocoapods-try-1.0.0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在项目下运行&lt;code&gt;pod install&lt;/code&gt; 报错了：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;od install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods/sources_manager.rb:159:in `&amp;lt;module:SourcesManagerMissingConstant&amp;gt;&amp;apos;: uninitialized constant Pod::SourcesManagerMissingConstant::Set (NameError)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods/sources_manager.rb:158:in `&amp;lt;module:Pod&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods/sources_manager.rb:3:in `&amp;lt;top (required)&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods/core_overrides.rb:1:in `&amp;lt;top (required)&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods.rb:71:in `&amp;lt;module:Pod&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods.rb:17:in `&amp;lt;top (required)&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:69:in `require&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/bin/pod:36:in `&amp;lt;top (required)&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /usr/local/bin/pod:23:in `load&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	from /usr/local/bin/pod:23:in `&amp;lt;main&amp;gt;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;网上搜了下，发现这个issue已经close了，但好像没有更新啊，&lt;a href=&quot;https://github.com/CocoaPods/CocoaPods/pull/5288&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/CocoaPods/CocoaPods/pull/5288&lt;/a&gt;&lt;br&gt;只好自己看代码修改一下：&lt;br&gt;修改 /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.0.0/lib/cocoapods/sources_manager.rb&lt;br&gt;在第二行增加&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;set&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;保存文件，需要输入密码的。&lt;/p&gt;
&lt;p&gt;继续运行&lt;code&gt;pod install&lt;/code&gt;， 结果又报下面的错误：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;edhita $ pod install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Re-creating CocoaPods due to major version update.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[!] `:head` dependencies have been removed. Please use normal external source dependencies (`:git =&amp;gt; &amp;apos;GIT_REPO_URL&amp;apos;`) instead of `:head` for `EDHFontSelector`.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这个看提示应该是个版本兼容问题了，还是先去仔细看看官方的&lt;a href=&quot;http://blog.cocoapods.org/CocoaPods-1.0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CocoaPods 1.0的release说明&lt;/a&gt;吧。&lt;br&gt;应该是不支持&lt;code&gt;:head&lt;/code&gt;这个语法了,并且必须有target。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.cocoapods.org/CocoaPods-1.0-Migration-Guide/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里有个官方迁移指南&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000005011497&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;拥抱 CocoaPods 1.0&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面用正在研究的markdown编辑器Edhita的Podfile做个升级的例子吧，&lt;br&gt;原地址 &lt;a href=&quot;https://github.com/tnantoka/edhita/blob/master/Podfile&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/tnantoka/edhita/blob/master/Podfile&lt;/a&gt;&lt;br&gt;迁移前的代码：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;platform :ios, &amp;quot;8.0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source &amp;apos;https://github.com/CocoaPods/Specs.git&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHFinder&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHFontSelector&amp;apos;, :head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHInputAccessoryView&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Google-Mobile-Ads-SDK&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Colours&amp;apos;, &amp;apos;~&amp;gt; 5.5&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;FXForms&amp;apos;, &amp;apos;~&amp;gt; 1.2&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;GHMarkdownParser&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;VTAcknowledgementsViewController&amp;apos;, &amp;apos;~&amp;gt; 0.12&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Bootstrap&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/Bootstrap/Bootstrap.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Megrim&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/Megrim/Megrim.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;github-markdown-css&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/github-markdown-css/github-markdown-css.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;post_install do |installer|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  require &amp;apos;fileutils&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  FileUtils.cp_r(&amp;apos;Pods/Target Support Files/Pods/Pods-acknowledgements.plist&amp;apos;, &amp;apos;Edhita/Assets/Pods-acknowledgements.plist&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;升级到cocosPods 1.0后的代码&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;platform :ios, &amp;quot;8.0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source &amp;apos;https://github.com/CocoaPods/Specs.git&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target &amp;apos;Edhita&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHFinder&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHFontSelector&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;EDHInputAccessoryView&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Google-Mobile-Ads-SDK&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;Colours&amp;apos;, &amp;apos;~&amp;gt; 5.5&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;FXForms&amp;apos;, &amp;apos;~&amp;gt; 1.2&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;GHMarkdownParser&amp;apos;, &amp;apos;~&amp;gt; 0.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;apos;VTAcknowledgementsViewController&amp;apos;, &amp;apos;~&amp;gt; 0.12&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# pod &amp;apos;Bootstrap&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/Bootstrap/Bootstrap.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# pod &amp;apos;Megrim&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/Megrim/Megrim.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# pod &amp;apos;github-markdown-css&amp;apos;, podspec: &amp;apos;https://raw.githubusercontent.com/tnantoka/podspecs/master/Specs/github-markdown-css/github-markdown-css.podspec&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;post_install do |installer|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  require &amp;apos;fileutils&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # FileUtils.cp_r(&amp;apos;Pods/Target Support Files/Pods-Edhita/Pods-Edhita-acknowledgements.plist&amp;apos;, &amp;apos;Edhita/Assets/Pods-acknowledgements.plist&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我偷懒注释了一些不需要的代码，运行&lt;code&gt;pod install&lt;/code&gt;, Xcode打开Edhita.xcworkspace, 就能编译通过了。效果如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o79096vir.bkt.clouddn.com/62edd018f93265892317424aaef3ae86.png&quot; alt=&quot;Edhiha&quot;&gt;&lt;/p&gt;
&lt;p&gt;这次CocoaPods 1.0的升级体验还真是坑啊，经历了4年半的开发才发布1.0版本啊，不知道该说什么好了。&lt;br&gt;珍爱生命，新项目拥抱Carthage吧。但也不能不用CocoaPods啊，那么多开源项目都用了啊，还是暂时先不要升级1.0了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.offbye.com/2016/05/29/%E5%8D%87%E7%BA%A7CocoaPods-1-0-0%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%B1%87%E6%80%BB/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;本文独立博客地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;昨天晚上升级了CocosPads1.0, 只是安装成功了，现在项目里面运行pod install又发现了几个问题，昨天折腾的太晚了。今天继续折腾吧。&lt;br&gt;今天终于彻底搞定了CocosPods1.0，包括安装，运行和一个开源项目PodFile的1.0升级。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>jenkins-xcodebuild命令行打包iOS项目问题汇总</title>
    <link href="http://offbye.com/2016/05/28/jenkins-xcodebuild%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%8C%85iOS%E9%A1%B9%E7%9B%AE%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>http://offbye.com/2016/05/28/jenkins-xcodebuild命令行打包iOS项目问题汇总/</id>
    <published>2016-05-28T14:17:37.000Z</published>
    <updated>2016-05-28T07:35:13.000Z</updated>
    
    <content type="html">&lt;p&gt;这几天折腾了jenkins对iOS swift项目的持续集成，碰到了很多问题，记录下吧&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;1-缺少scheme&quot;&gt;&lt;a href=&quot;#1-缺少scheme&quot; class=&quot;headerlink&quot; title=&quot;1. 缺少scheme&quot;&gt;&lt;/a&gt;1. 缺少scheme&lt;/h2&gt;&lt;p&gt;xcodebuild: error: The project named “Foo” does not contain a scheme named “Bar”. The “-list” option can be used to find the names of the schemes in the project.&lt;/p&gt;
&lt;p&gt;解决办法：&lt;br&gt;The root cause is that the default behavior of Schemes is to keep schemes ‘private’ until they are specifically marked as shared. In the case of a command-line initiated build, the Xcode UI never runs and the xcoderun tool doesn’t have its own cache of Schemes to work with.&lt;br&gt;To your schema be visible for command-line build you must mark it as a shared scheme.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Choose Scheme &amp;gt; Manage Schemes (from the Product Menu).&lt;br&gt;Ensure the ‘Shared’ box is checked for that scheme&lt;br&gt;A new .xcscheme file has been created in your project at&lt;br&gt;WorkspaceName.xcworkspace/xcshareddata/xcschemes.&lt;br&gt;Commit this file to your repository&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;2-Error-User-interaction-is-not-allowed&quot;&gt;&lt;a href=&quot;#2-Error-User-interaction-is-not-allowed&quot; class=&quot;headerlink&quot; title=&quot;2.  Error:   User interaction is not allowed.&quot;&gt;&lt;/a&gt;2.  Error:   User interaction is not allowed.&lt;/h2&gt;&lt;p&gt;运行下面的命令可解决&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ security unlock-keychain -p  ~/Library/Keychains/login.keychain&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ security show-keychain-info ~/Library/Keychains/login.keychain&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Keychain &amp;quot;/Users/XXX/Library/Keychains/login.keychain&amp;quot; no-timeout&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-Xcode-7后导出IPA命令发生变化&quot;&gt;&lt;a href=&quot;#3-Xcode-7后导出IPA命令发生变化&quot; class=&quot;headerlink&quot; title=&quot;3. Xcode 7后导出IPA命令发生变化&quot;&gt;&lt;/a&gt;3. Xcode 7后导出IPA命令发生变化&lt;/h2&gt;&lt;p&gt;以前我是通过下面的命令打包的，但现在的swift项目这样导出的包在iPhone安装后直接闪退&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xcodebuild -target $&amp;#123;TARGET_NAME&amp;#125; -configuration $&amp;#123;BUILD_CONFIGURATION&amp;#125; -sdk phones build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xcrun -sdk iphoneos PackageApplication -v $&amp;#123;APP_NAME&amp;#125; -o $&amp;#123;IPA_PATH&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Xcode7之后取消了原来的-exportFormat，而是使用exportOptionsPlist 来取代，具体的使用方法可以在Terminal打xcodebuild –help查看。&lt;br&gt;我们需要自己创建一个plist作为Export Options，只要有这个配置文件，那我们在使用这个命令的时候就能打出跟手动用Xcode Archive之后export出的ipa一样了。&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;teamID&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;XXXXXXX&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;method&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;enterprise&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;compileBitcode&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;false&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;uploadSymbols&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;false&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plist&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;4-最新的xcodebuild-导出ipa命令&quot;&gt;&lt;a href=&quot;#4-最新的xcodebuild-导出ipa命令&quot; class=&quot;headerlink&quot; title=&quot;4. 最新的xcodebuild 导出ipa命令&quot;&gt;&lt;/a&gt;4. 最新的xcodebuild 导出ipa命令&lt;/h2&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xcodebuild -target XXXX -configuration Release build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xcodebuild archive -project &amp;#123;xcodeproj&amp;#125; -scheme &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;scheme&amp;#125;&#39;&lt;/span&gt; -sdk iphoneos  -archivePath &amp;#123;archive_path&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xcodebuild -exportArchive -archivePath  &amp;#123;archive_path&amp;#125; -exportPath &amp;#123;export_path&amp;#125;  -exportOptionsPlist &amp;#123;export_plist_path&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;[本文独立博客地址](&lt;a href=&quot;http://www.offbye.com）&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.offbye.com）&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这几天折腾了jenkins对iOS swift项目的持续集成，碰到了很多问题，记录下吧&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
